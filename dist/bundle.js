!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("phaser")):"function"==typeof define&&define.amd?define(["phaser"],t):"object"==typeof exports?exports.bundle=t(require("phaser")):e.bundle=t(e.phaser)}(window,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i={type:Phaser.AUTO,scale:{width:window.innerWidth,height:window.innerHeight},backgroundColor:"#000000",parent:"space-sim",physics:{default:"arcade",arcade:{gravity:{x:0,y:0}}},scene:r.GameScene};t.game=new Phaser.Game(i),window.addEventListener("resize",(function(){t.game.scale.refresh()}))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),s={active:!0,visible:!0,key:"GameScene"},a=function(e){function t(){var t=e.call(this,s)||this;return t.isPaused=!1,t}return i(t,e),t.prototype.preload=function(){},t.prototype.create=function(){var e=this;this.inputKeys=this.input.keyboard.createCursorKeys();var t={scene:this,x:200,y:200,texture:"./assets/sprites/ship-pod.png",frame:0};this.player=new o.ShipPod(t),this.input.on("pointermove",(function(t){e.mouseLocation=new Phaser.Math.Vector2(t.x,t.y)})),this.input.on("KEY_DOWN_P",(function(t){e.isPaused=!0})),this.input.on("KEY_DOWN_R",(function(){e.isPaused=!1}))},t.prototype.update=function(){this.isPaused||this.player.update()},t}(Phaser.Scene);t.GameScene=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);n(9);var i=function(){function e(e){this.active=!0,this.fuelCapacity=100,this.remainingFuel=100,this.thrusterForce=1,this.thrusterFuelConsumption=.01,this.thrusterHeatGeneration=.5,this.rotationRate=.2,this.integrity=100,this.temperature=0,this.realPosition=Phaser.Math.Vector2.ZERO,this.config=e,this.id=r.RNG.guid(),this.gameObj=this.config.scene.physics.add.sprite(this.config.scene.game.scale.width/2,this.config.scene.game.scale.height/2,"ship-pod")}return e.prototype.update=function(){this.lookAt(this.config.scene.mouseLocation),this.config.scene.inputKeys.space.isDown&&this.activateThruster(),this.applyCooling(),this.integrityCheck()},e.prototype.getId=function(){return this.id},e.prototype.lookAt=function(e){if(e){var t=Phaser.Math.Angle.Between(e.x,e.y,this.gameObj.x,this.gameObj.y);this.gameObj.setRotation(t)}},e.prototype.activateThruster=function(){if(this.remainingFuel>0){var e=this.config.scene.mouseLocation.subtract(new Phaser.Math.Vector2(this.gameObj.x,this.gameObj.y)).normalize().multiply(new Phaser.Math.Vector2(this.thrusterForce,this.thrusterForce)),t=this.gameObj.body.velocity;console.log("current velocity: "+JSON.stringify(t));var n=t.add(e);this.gameObj.setVelocity(n.x,n.y),this.remainingFuel-=this.thrusterFuelConsumption,this.applyHeating(this.thrusterHeatGeneration)}},e.prototype.applyHeating=function(e){if(this.temperature+=e,this.temperature>100){var t=this.temperature-100;this.integrity-=t}},e.prototype.applyCooling=function(){this.temperature>0&&(this.temperature-=.1),this.temperature<0&&(this.temperature=0)},e.prototype.integrityCheck=function(){this.integrity<=0&&(this.active=!1)},e}();t.ShipPod=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6);!function(e){e.int=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.guid=function(){return r.v4()}}(t.RNG||(t.RNG={}))},function(e,t,n){var r=n(7),i=n(8),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){var r,i,o=n(0),s=n(1),a=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,p=t||[],f=(e=e||{}).node||r,h=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==h){var l=o();null==f&&(f=r=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==h&&(h=i=16383&(l[6]<<8|l[7]))}var d=void 0!==e.msecs?e.msecs:(new Date).getTime(),y=void 0!==e.nsecs?e.nsecs:u+1,v=d-a+(y-u)/1e4;if(v<0&&void 0===e.clockseq&&(h=h+1&16383),(v<0||d>a)&&void 0===e.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=d,u=y,i=h;var m=(1e4*(268435455&(d+=122192928e5))+y)%4294967296;p[c++]=m>>>24&255,p[c++]=m>>>16&255,p[c++]=m>>>8&255,p[c++]=255&m;var g=d/4294967296*1e4&268435455;p[c++]=g>>>8&255,p[c++]=255&g,p[c++]=g>>>24&15|16,p[c++]=g>>>16&255,p[c++]=h>>>8|128,p[c++]=255&h;for(var b=0;b<6;++b)p[c+b]=f[b];return t||s(p)}},function(e,t,n){var r=n(0),i=n(1);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(t,n){t.exports=e}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9idW5kbGUvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2J1bmRsZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9idW5kbGUvLi9ub2RlX21vZHVsZXMvdXVpZC9saWIvcm5nLWJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vYnVuZGxlLy4vbm9kZV9tb2R1bGVzL3V1aWQvbGliL2J5dGVzVG9VdWlkLmpzIiwid2VicGFjazovL2J1bmRsZS8uL3NyYy9nYW1lLnRzIiwid2VicGFjazovL2J1bmRsZS8uL3NyYy9nYW1lLXNjZW5lLnRzIiwid2VicGFjazovL2J1bmRsZS8uL3NyYy9zaGlwcy9zaGlwLXBvZC50cyIsIndlYnBhY2s6Ly9idW5kbGUvLi9zcmMvdXRpbGl0aWVzL3JuZy50cyIsIndlYnBhY2s6Ly9idW5kbGUvLi9ub2RlX21vZHVsZXMvdXVpZC9pbmRleC5qcyIsIndlYnBhY2s6Ly9idW5kbGUvLi9ub2RlX21vZHVsZXMvdXVpZC92MS5qcyIsIndlYnBhY2s6Ly9idW5kbGUvLi9ub2RlX21vZHVsZXMvdXVpZC92NC5qcyIsIndlYnBhY2s6Ly9idW5kbGUvZXh0ZXJuYWwgXCJwaGFzZXJcIiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fOV9fIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImdldFJhbmRvbVZhbHVlcyIsImNyeXB0byIsIm1zQ3J5cHRvIiwicm5kczgiLCJVaW50OEFycmF5Iiwicm5kcyIsIkFycmF5IiwiTWF0aCIsInJhbmRvbSIsImJ5dGVUb0hleCIsInRvU3RyaW5nIiwic3Vic3RyIiwiYnVmIiwib2Zmc2V0IiwiYnRoIiwiam9pbiIsImdhbWVDb25maWciLCJ0eXBlIiwiUGhhc2VyIiwiQVVUTyIsInNjYWxlIiwid2lkdGgiLCJpbm5lcldpZHRoIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJwYXJlbnQiLCJwaHlzaWNzIiwiZGVmYXVsdCIsImFyY2FkZSIsImdyYXZpdHkiLCJ4IiwieSIsInNjZW5lIiwiR2FtZVNjZW5lIiwiZ2FtZSIsIkdhbWUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVmcmVzaCIsInNjZW5lQ29uZmlnIiwiYWN0aXZlIiwidmlzaWJsZSIsImlzUGF1c2VkIiwicHJlbG9hZCIsInRoaXMiLCJpbnB1dEtleXMiLCJpbnB1dCIsImtleWJvYXJkIiwiY3JlYXRlQ3Vyc29yS2V5cyIsInBvZENvbmZpZyIsInRleHR1cmUiLCJmcmFtZSIsInBsYXllciIsIlNoaXBQb2QiLCJvbiIsInBvaW50ZXIiLCJtb3VzZUxvY2F0aW9uIiwiVmVjdG9yMiIsImV2ZW50IiwidXBkYXRlIiwiU2NlbmUiLCJjb25maWciLCJmdWVsQ2FwYWNpdHkiLCJyZW1haW5pbmdGdWVsIiwidGhydXN0ZXJGb3JjZSIsInRocnVzdGVyRnVlbENvbnN1bXB0aW9uIiwidGhydXN0ZXJIZWF0R2VuZXJhdGlvbiIsInJvdGF0aW9uUmF0ZSIsImludGVncml0eSIsInRlbXBlcmF0dXJlIiwicmVhbFBvc2l0aW9uIiwiWkVSTyIsImlkIiwiUk5HIiwiZ3VpZCIsImdhbWVPYmoiLCJhZGQiLCJzcHJpdGUiLCJsb29rQXQiLCJzcGFjZSIsImlzRG93biIsImFjdGl2YXRlVGhydXN0ZXIiLCJhcHBseUNvb2xpbmciLCJpbnRlZ3JpdHlDaGVjayIsImdldElkIiwicG9zaXRpb24iLCJyYWRpYW5zIiwiQW5nbGUiLCJCZXR3ZWVuIiwic2V0Um90YXRpb24iLCJmb3JjZSIsInN1YnRyYWN0Iiwibm9ybWFsaXplIiwibXVsdGlwbHkiLCJ2IiwiYm9keSIsInZlbG9jaXR5IiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZXRWZWxvY2l0eSIsImFwcGx5SGVhdGluZyIsImRlZ3JlZXMiLCJkZWx0YSIsImludCIsIm1pbiIsIm1heCIsImZsb29yIiwidjQiLCJ2MSIsInV1aWQiLCJfbm9kZUlkIiwiX2Nsb2Nrc2VxIiwicm5nIiwiYnl0ZXNUb1V1aWQiLCJfbGFzdE1TZWNzIiwiX2xhc3ROU2VjcyIsIm9wdGlvbnMiLCJiIiwibm9kZSIsImNsb2Nrc2VxIiwidW5kZWZpbmVkIiwic2VlZEJ5dGVzIiwibXNlY3MiLCJEYXRlIiwiZ2V0VGltZSIsIm5zZWNzIiwiZHQiLCJFcnJvciIsInRsIiwidG1oIiwiaWkiXSwibWFwcGluZ3MiOiJDQUFBLFNBQTJDQSxFQUFNQyxHQUMxQixpQkFBWkMsU0FBMEMsaUJBQVhDLE9BQ3hDQSxPQUFPRCxRQUFVRCxFQUFRRyxRQUFRLFdBQ1IsbUJBQVhDLFFBQXlCQSxPQUFPQyxJQUM5Q0QsT0FBTyxDQUFDLFVBQVdKLEdBQ08saUJBQVpDLFFBQ2RBLFFBQWdCLE9BQUlELEVBQVFHLFFBQVEsV0FFcENKLEVBQWEsT0FBSUMsRUFBUUQsRUFBYSxRQVJ4QyxDQVNHTyxRQUFRLFNBQVNDLEdBQ3BCLE8sWUNURSxJQUFJQyxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVVCxRQUduQyxJQUFJQyxFQUFTTSxFQUFpQkUsR0FBWSxDQUN6Q0MsRUFBR0QsRUFDSEUsR0FBRyxFQUNIWCxRQUFTLElBVVYsT0FOQVksRUFB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LEdBQWEsSUFHekJPLEVBQ0YsSUFBSyxJQUFJd0gsRUFBSyxFQUFHQSxFQUFLLEtBQU1BLEVBQzFCeEgsRUFBSTVDLEVBQUlvSyxHQUFNL0gsRUFBSytILEdBSXZCLE9BQU94SCxHQUFPdUcsRUFBWTlHLEssY0N6QjVCOUMsRUFBT0QsUUFBVU0iLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwicGhhc2VyXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcInBoYXNlclwiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJidW5kbGVcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJwaGFzZXJcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImJ1bmRsZVwiXSA9IGZhY3Rvcnkocm9vdFtcInBoYXNlclwiXSk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzlfXykge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcbiIsIi8vIFVuaXF1ZSBJRCBjcmVhdGlvbiByZXF1aXJlcyBhIGhpZ2ggcXVhbGl0eSByYW5kb20gIyBnZW5lcmF0b3IuICBJbiB0aGVcbi8vIGJyb3dzZXIgdGhpcyBpcyBhIGxpdHRsZSBjb21wbGljYXRlZCBkdWUgdG8gdW5rbm93biBxdWFsaXR5IG9mIE1hdGgucmFuZG9tKClcbi8vIGFuZCBpbmNvbnNpc3RlbnQgc3VwcG9ydCBmb3IgdGhlIGBjcnlwdG9gIEFQSS4gIFdlIGRvIHRoZSBiZXN0IHdlIGNhbiB2aWFcbi8vIGZlYXR1cmUtZGV0ZWN0aW9uXG5cbi8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0b1xuLy8gaW1wbGVtZW50YXRpb24uIEFsc28sIGZpbmQgdGhlIGNvbXBsZXRlIGltcGxlbWVudGF0aW9uIG9mIGNyeXB0byBvbiBJRTExLlxudmFyIGdldFJhbmRvbVZhbHVlcyA9ICh0eXBlb2YoY3J5cHRvKSAhPSAndW5kZWZpbmVkJyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YobXNDcnlwdG8pICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09ICdmdW5jdGlvbicgJiYgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pKTtcblxuaWYgKGdldFJhbmRvbVZhbHVlcykge1xuICAvLyBXSEFUV0cgY3J5cHRvIFJORyAtIGh0dHA6Ly93aWtpLndoYXR3Zy5vcmcvd2lraS9DcnlwdG9cbiAgdmFyIHJuZHM4ID0gbmV3IFVpbnQ4QXJyYXkoMTYpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB3aGF0d2dSTkcoKSB7XG4gICAgZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbiAgICByZXR1cm4gcm5kczg7XG4gIH07XG59IGVsc2Uge1xuICAvLyBNYXRoLnJhbmRvbSgpLWJhc2VkIChSTkcpXG4gIC8vXG4gIC8vIElmIGFsbCBlbHNlIGZhaWxzLCB1c2UgTWF0aC5yYW5kb20oKS4gIEl0J3MgZmFzdCwgYnV0IGlzIG9mIHVuc3BlY2lmaWVkXG4gIC8vIHF1YWxpdHkuXG4gIHZhciBybmRzID0gbmV3IEFycmF5KDE2KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG1hdGhSTkcoKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIHI7IGkgPCAxNjsgaSsrKSB7XG4gICAgICBpZiAoKGkgJiAweDAzKSA9PT0gMCkgciA9IE1hdGgucmFuZG9tKCkgKiAweDEwMDAwMDAwMDtcbiAgICAgIHJuZHNbaV0gPSByID4+PiAoKGkgJiAweDAzKSA8PCAzKSAmIDB4ZmY7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJuZHM7XG4gIH07XG59XG4iLCIvKipcbiAqIENvbnZlcnQgYXJyYXkgb2YgMTYgYnl0ZSB2YWx1ZXMgdG8gVVVJRCBzdHJpbmcgZm9ybWF0IG9mIHRoZSBmb3JtOlxuICogWFhYWFhYWFgtWFhYWC1YWFhYLVhYWFgtWFhYWFhYWFhYWFhYXG4gKi9cbnZhciBieXRlVG9IZXggPSBbXTtcbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4W2ldID0gKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnN1YnN0cigxKTtcbn1cblxuZnVuY3Rpb24gYnl0ZXNUb1V1aWQoYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBvZmZzZXQgfHwgMDtcbiAgdmFyIGJ0aCA9IGJ5dGVUb0hleDtcbiAgLy8gam9pbiB1c2VkIHRvIGZpeCBtZW1vcnkgaXNzdWUgY2F1c2VkIGJ5IGNvbmNhdGVuYXRpb246IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMxNzUjYzRcbiAgcmV0dXJuIChbXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSxcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuICAgIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSxcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLFxuICAgIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV1cbiAgXSkuam9pbignJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYnl0ZXNUb1V1aWQ7XG4iLCJpbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tIFwiLi9nYW1lLXNjZW5lXCI7XHJcblxyXG5jb25zdCBnYW1lQ29uZmlnOiBQaGFzZXIuVHlwZXMuQ29yZS5HYW1lQ29uZmlnID0ge1xyXG4gICAgdHlwZTogUGhhc2VyLkFVVE8sXHJcbiAgICBzY2FsZToge1xyXG4gICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCxcclxuICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodFxyXG4gICAgfSxcclxuICAgIGJhY2tncm91bmRDb2xvcjogJyMwMDAwMDAnLFxyXG4gICAgcGFyZW50OiAnc3BhY2Utc2ltJyxcclxuICAgIHBoeXNpY3M6IHtcclxuICAgICAgICBkZWZhdWx0OiAnYXJjYWRlJyxcclxuICAgICAgICBhcmNhZGU6IHtcclxuICAgICAgICAgICAgZ3Jhdml0eTogeyB4OiAwLCB5OiAwIH0sXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNjZW5lOiBHYW1lU2NlbmVcclxufTtcclxuZXhwb3J0IGNvbnN0IGdhbWU6IFBoYXNlci5HYW1lID0gbmV3IFBoYXNlci5HYW1lKGdhbWVDb25maWcpO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgIGdhbWUuc2NhbGUucmVmcmVzaCgpO1xyXG59KSIsImltcG9ydCB7IFNoaXBQb2QgfSBmcm9tIFwiLi9zaGlwcy9zaGlwLXBvZFwiO1xyXG5pbXBvcnQgeyBTaGlwUG9kQ29uZmlnIH0gZnJvbSBcIi4vc2hpcHMvc2hpcC1wb2QtY29uZmlnXCI7XHJcblxyXG5jb25zdCBzY2VuZUNvbmZpZzogUGhhc2VyLlR5cGVzLlNjZW5lcy5TZXR0aW5nc0NvbmZpZyA9IHtcclxuICAgIGFjdGl2ZTogdHJ1ZSxcclxuICAgIHZpc2libGU6IHRydWUsXHJcbiAgICBrZXk6ICdHYW1lU2NlbmUnXHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZVNjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuICAgIHByaXZhdGUgcGxheWVyOiBTaGlwUG9kO1xyXG4gICAgXHJcbiAgICBpc1BhdXNlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgaW5wdXRLZXlzOiBQaGFzZXIuVHlwZXMuSW5wdXQuS2V5Ym9hcmQuQ3Vyc29yS2V5cztcclxuICAgIG1vdXNlTG9jYXRpb246IFBoYXNlci5NYXRoLlZlY3RvcjI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoc2NlbmVDb25maWcpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwcmVsb2FkKCk6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjcmVhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pbnB1dEtleXMgPSB0aGlzLmlucHV0LmtleWJvYXJkLmNyZWF0ZUN1cnNvcktleXMoKTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgcG9kQ29uZmlnOiBTaGlwUG9kQ29uZmlnID0ge1xyXG4gICAgICAgICAgICBzY2VuZTogdGhpcyxcclxuICAgICAgICAgICAgeDogMjAwLFxyXG4gICAgICAgICAgICB5OiAyMDAsXHJcbiAgICAgICAgICAgIHRleHR1cmU6ICcuL2Fzc2V0cy9zcHJpdGVzL3NoaXAtcG9kLnBuZycsXHJcbiAgICAgICAgICAgIGZyYW1lOiAwXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBTaGlwUG9kKHBvZENvbmZpZyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5pbnB1dC5vbigncG9pbnRlcm1vdmUnLCAocG9pbnRlcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlTG9jYXRpb24gPSBuZXcgUGhhc2VyLk1hdGguVmVjdG9yMihwb2ludGVyLngsIHBvaW50ZXIueSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5vbignS0VZX0RPV05fUCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmlzUGF1c2VkID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmlucHV0Lm9uKCdLRVlfRE9XTl9SJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmlzUGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNQYXVzZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXIudXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgUk5HIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9ybmdcIjtcclxuaW1wb3J0IFwicGhhc2VyXCI7XHJcbmltcG9ydCB7IFNoaXBQb2RDb25maWcgfSBmcm9tIFwiLi9zaGlwLXBvZC1jb25maWdcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTaGlwUG9kIHtcclxuICAgIHByaXZhdGUgaWQ6IHN0cmluZzsgLy8gVVVJRFxyXG4gICAgcHJpdmF0ZSBjb25maWc6IFNoaXBQb2RDb25maWc7XHJcbiAgICBwcml2YXRlIGdhbWVPYmo6IFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGU7XHJcblxyXG4gICAgYWN0aXZlOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgZnVlbENhcGFjaXR5OiBudW1iZXIgPSAxMDA7XHJcbiAgICByZW1haW5pbmdGdWVsOiBudW1iZXIgPSAxMDA7XHJcbiAgICBcclxuICAgIHRocnVzdGVyRm9yY2U6IG51bWJlciA9IDE7IC8vIEtpbG9OZXd0b25zXHJcbiAgICB0aHJ1c3RlckZ1ZWxDb25zdW1wdGlvbjogbnVtYmVyID0gMC4wMTtcclxuICAgIHRocnVzdGVySGVhdEdlbmVyYXRpb246IG51bWJlciA9IDAuNTtcclxuXHJcbiAgICByb3RhdGlvblJhdGU6IG51bWJlciA9IDAuMjsgLy8gZGVncmVlcyBwZXIgc2Vjb25kXHJcbiAgICBpbnRlZ3JpdHk6IG51bWJlciA9IDEwMDsgLy8gbWF4aW11bSBvZiAxMDBcclxuICAgIHRlbXBlcmF0dXJlOiBudW1iZXIgPSAwOyAvLyBpbiBDZWxjaXVzXHJcblxyXG4gICAgcmVhbFBvc2l0aW9uOiBQaGFzZXIuTWF0aC5WZWN0b3IyID0gUGhhc2VyLk1hdGguVmVjdG9yMi5aRVJPOyAvLyBuZWVkZWQgc28gd2UgY2FuIHVzZSBGbG9hdGluZyBPcmlnaW5cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IFNoaXBQb2RDb25maWcpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICB0aGlzLmlkID0gUk5HLmd1aWQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5nYW1lT2JqID0gdGhpcy5jb25maWcuc2NlbmUucGh5c2ljcy5hZGQuc3ByaXRlKHRoaXMuY29uZmlnLnNjZW5lLmdhbWUuc2NhbGUud2lkdGggLyAyLCB0aGlzLmNvbmZpZy5zY2VuZS5nYW1lLnNjYWxlLmhlaWdodCAvIDIsICdzaGlwLXBvZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmxvb2tBdCh0aGlzLmNvbmZpZy5zY2VuZS5tb3VzZUxvY2F0aW9uKTtcclxuICAgICAgICBpZiAodGhpcy5jb25maWcuc2NlbmUuaW5wdXRLZXlzLnNwYWNlLmlzRG93bikge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2YXRlVGhydXN0ZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hcHBseUNvb2xpbmcoKTtcclxuICAgICAgICB0aGlzLmludGVncml0eUNoZWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SWQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pZDtcclxuICAgIH1cclxuXHJcbiAgICBsb29rQXQocG9zaXRpb246IFBoYXNlci5NYXRoLlZlY3RvcjIpOiB2b2lkIHtcclxuICAgICAgICBpZiAocG9zaXRpb24pIHtcclxuICAgICAgICAgICAgbGV0IHJhZGlhbnM6IG51bWJlciA9IFBoYXNlci5NYXRoLkFuZ2xlLkJldHdlZW4ocG9zaXRpb24ueCwgcG9zaXRpb24ueSwgdGhpcy5nYW1lT2JqLngsIHRoaXMuZ2FtZU9iai55KTtcclxuICAgICAgICAgICAgdGhpcy5nYW1lT2JqLnNldFJvdGF0aW9uKHJhZGlhbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhY3RpdmF0ZVRocnVzdGVyKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnJlbWFpbmluZ0Z1ZWwgPiAwKSB7XHJcbiAgICAgICAgICAgIGxldCBkZWx0YTogUGhhc2VyLk1hdGguVmVjdG9yMiA9IHRoaXMuY29uZmlnLnNjZW5lLm1vdXNlTG9jYXRpb24uc3VidHJhY3QobmV3IFBoYXNlci5NYXRoLlZlY3RvcjIodGhpcy5nYW1lT2JqLngsIHRoaXMuZ2FtZU9iai55KSk7XHJcbiAgICAgICAgICAgIGxldCBub3JtYWxpc2VkRGVsdGE6IFBoYXNlci5NYXRoLlZlY3RvcjIgPSBkZWx0YS5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgbGV0IGZvcmNlOiBQaGFzZXIuTWF0aC5WZWN0b3IyID0gbm9ybWFsaXNlZERlbHRhLm11bHRpcGx5KG5ldyBQaGFzZXIuTWF0aC5WZWN0b3IyKHRoaXMudGhydXN0ZXJGb3JjZSwgdGhpcy50aHJ1c3RlckZvcmNlKSk7XHJcbiAgICAgICAgICAgIGxldCB2ID0gdGhpcy5nYW1lT2JqLmJvZHkudmVsb2NpdHk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBjdXJyZW50IHZlbG9jaXR5OiAke0pTT04uc3RyaW5naWZ5KHYpfWApO1xyXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHkgPSB2LmFkZChmb3JjZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZU9iai5zZXRWZWxvY2l0eSh2ZWxvY2l0eS54LCB2ZWxvY2l0eS55KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVtYWluaW5nRnVlbCAtPSB0aGlzLnRocnVzdGVyRnVlbENvbnN1bXB0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5SGVhdGluZyh0aGlzLnRocnVzdGVySGVhdEdlbmVyYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhcHBseUhlYXRpbmcoZGVncmVlczogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50ZW1wZXJhdHVyZSArPSBkZWdyZWVzO1xyXG4gICAgICAgIGlmICh0aGlzLnRlbXBlcmF0dXJlID4gMTAwKSB7XHJcbiAgICAgICAgICAgIC8vIHJlZHVjZSBpbnRlZ3JpdHkgYmFzZWQgb24gZGVncmVlcyBvdmVyIDEwMFxyXG4gICAgICAgICAgICBsZXQgZGVsdGE6IG51bWJlciA9IHRoaXMudGVtcGVyYXR1cmUgLSAxMDA7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZWdyaXR5IC09IGRlbHRhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhcHBseUNvb2xpbmcoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMudGVtcGVyYXR1cmUgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGVtcGVyYXR1cmUgLT0gMC4xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy50ZW1wZXJhdHVyZSA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy50ZW1wZXJhdHVyZSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGludGVncml0eUNoZWNrKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmludGVncml0eSA8PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IGRlc3Ryb3kgc2hpcCBhbmQgZW5kIGdhbWVcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyB2NCB9IGZyb20gXCJ1dWlkXCI7XHJcblxyXG5leHBvcnQgbW9kdWxlIFJORyB7XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaW50KG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGd1aWQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdjQoKTtcclxuICAgIH1cclxufSIsInZhciB2MSA9IHJlcXVpcmUoJy4vdjEnKTtcbnZhciB2NCA9IHJlcXVpcmUoJy4vdjQnKTtcblxudmFyIHV1aWQgPSB2NDtcbnV1aWQudjEgPSB2MTtcbnV1aWQudjQgPSB2NDtcblxubW9kdWxlLmV4cG9ydHMgPSB1dWlkO1xuIiwidmFyIHJuZyA9IHJlcXVpcmUoJy4vbGliL3JuZycpO1xudmFyIGJ5dGVzVG9VdWlkID0gcmVxdWlyZSgnLi9saWIvYnl0ZXNUb1V1aWQnKTtcblxuLy8gKipgdjEoKWAgLSBHZW5lcmF0ZSB0aW1lLWJhc2VkIFVVSUQqKlxuLy9cbi8vIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9MaW9zSy9VVUlELmpzXG4vLyBhbmQgaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3V1aWQuaHRtbFxuXG52YXIgX25vZGVJZDtcbnZhciBfY2xvY2tzZXE7XG5cbi8vIFByZXZpb3VzIHV1aWQgY3JlYXRpb24gdGltZVxudmFyIF9sYXN0TVNlY3MgPSAwO1xudmFyIF9sYXN0TlNlY3MgPSAwO1xuXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkIGZvciBBUEkgZGV0YWlsc1xuZnVuY3Rpb24gdjEob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBidWYgJiYgb2Zmc2V0IHx8IDA7XG4gIHZhciBiID0gYnVmIHx8IFtdO1xuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgbm9kZSA9IG9wdGlvbnMubm9kZSB8fCBfbm9kZUlkO1xuICB2YXIgY2xvY2tzZXEgPSBvcHRpb25zLmNsb2Nrc2VxICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsb2Nrc2VxIDogX2Nsb2Nrc2VxO1xuXG4gIC8vIG5vZGUgYW5kIGNsb2Nrc2VxIG5lZWQgdG8gYmUgaW5pdGlhbGl6ZWQgdG8gcmFuZG9tIHZhbHVlcyBpZiB0aGV5J3JlIG5vdFxuICAvLyBzcGVjaWZpZWQuICBXZSBkbyB0aGlzIGxhemlseSB0byBtaW5pbWl6ZSBpc3N1ZXMgcmVsYXRlZCB0byBpbnN1ZmZpY2llbnRcbiAgLy8gc3lzdGVtIGVudHJvcHkuICBTZWUgIzE4OVxuICBpZiAobm9kZSA9PSBudWxsIHx8IGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICB2YXIgc2VlZEJ5dGVzID0gcm5nKCk7XG4gICAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuNSwgY3JlYXRlIGFuZCA0OC1iaXQgbm9kZSBpZCwgKDQ3IHJhbmRvbSBiaXRzICsgbXVsdGljYXN0IGJpdCA9IDEpXG4gICAgICBub2RlID0gX25vZGVJZCA9IFtcbiAgICAgICAgc2VlZEJ5dGVzWzBdIHwgMHgwMSxcbiAgICAgICAgc2VlZEJ5dGVzWzFdLCBzZWVkQnl0ZXNbMl0sIHNlZWRCeXRlc1szXSwgc2VlZEJ5dGVzWzRdLCBzZWVkQnl0ZXNbNV1cbiAgICAgIF07XG4gICAgfVxuICAgIGlmIChjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgICAvLyBQZXIgNC4yLjIsIHJhbmRvbWl6ZSAoMTQgYml0KSBjbG9ja3NlcVxuICAgICAgY2xvY2tzZXEgPSBfY2xvY2tzZXEgPSAoc2VlZEJ5dGVzWzZdIDw8IDggfCBzZWVkQnl0ZXNbN10pICYgMHgzZmZmO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVVSUQgdGltZXN0YW1wcyBhcmUgMTAwIG5hbm8tc2Vjb25kIHVuaXRzIHNpbmNlIHRoZSBHcmVnb3JpYW4gZXBvY2gsXG4gIC8vICgxNTgyLTEwLTE1IDAwOjAwKS4gIEpTTnVtYmVycyBhcmVuJ3QgcHJlY2lzZSBlbm91Z2ggZm9yIHRoaXMsIHNvXG4gIC8vIHRpbWUgaXMgaGFuZGxlZCBpbnRlcm5hbGx5IGFzICdtc2VjcycgKGludGVnZXIgbWlsbGlzZWNvbmRzKSBhbmQgJ25zZWNzJ1xuICAvLyAoMTAwLW5hbm9zZWNvbmRzIG9mZnNldCBmcm9tIG1zZWNzKSBzaW5jZSB1bml4IGVwb2NoLCAxOTcwLTAxLTAxIDAwOjAwLlxuICB2YXIgbXNlY3MgPSBvcHRpb25zLm1zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1zZWNzIDogbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgLy8gUGVyIDQuMi4xLjIsIHVzZSBjb3VudCBvZiB1dWlkJ3MgZ2VuZXJhdGVkIGR1cmluZyB0aGUgY3VycmVudCBjbG9ja1xuICAvLyBjeWNsZSB0byBzaW11bGF0ZSBoaWdoZXIgcmVzb2x1dGlvbiBjbG9ja1xuICB2YXIgbnNlY3MgPSBvcHRpb25zLm5zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5zZWNzIDogX2xhc3ROU2VjcyArIDE7XG5cbiAgLy8gVGltZSBzaW5jZSBsYXN0IHV1aWQgY3JlYXRpb24gKGluIG1zZWNzKVxuICB2YXIgZHQgPSAobXNlY3MgLSBfbGFzdE1TZWNzKSArIChuc2VjcyAtIF9sYXN0TlNlY3MpLzEwMDAwO1xuXG4gIC8vIFBlciA0LjIuMS4yLCBCdW1wIGNsb2Nrc2VxIG9uIGNsb2NrIHJlZ3Jlc3Npb25cbiAgaWYgKGR0IDwgMCAmJiBvcHRpb25zLmNsb2Nrc2VxID09PSB1bmRlZmluZWQpIHtcbiAgICBjbG9ja3NlcSA9IGNsb2Nrc2VxICsgMSAmIDB4M2ZmZjtcbiAgfVxuXG4gIC8vIFJlc2V0IG5zZWNzIGlmIGNsb2NrIHJlZ3Jlc3NlcyAobmV3IGNsb2Nrc2VxKSBvciB3ZSd2ZSBtb3ZlZCBvbnRvIGEgbmV3XG4gIC8vIHRpbWUgaW50ZXJ2YWxcbiAgaWYgKChkdCA8IDAgfHwgbXNlY3MgPiBfbGFzdE1TZWNzKSAmJiBvcHRpb25zLm5zZWNzID09PSB1bmRlZmluZWQpIHtcbiAgICBuc2VjcyA9IDA7XG4gIH1cblxuICAvLyBQZXIgNC4yLjEuMiBUaHJvdyBlcnJvciBpZiB0b28gbWFueSB1dWlkcyBhcmUgcmVxdWVzdGVkXG4gIGlmIChuc2VjcyA+PSAxMDAwMCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXVpZC52MSgpOiBDYW5cXCd0IGNyZWF0ZSBtb3JlIHRoYW4gMTBNIHV1aWRzL3NlYycpO1xuICB9XG5cbiAgX2xhc3RNU2VjcyA9IG1zZWNzO1xuICBfbGFzdE5TZWNzID0gbnNlY3M7XG4gIF9jbG9ja3NlcSA9IGNsb2Nrc2VxO1xuXG4gIC8vIFBlciA0LjEuNCAtIENvbnZlcnQgZnJvbSB1bml4IGVwb2NoIHRvIEdyZWdvcmlhbiBlcG9jaFxuICBtc2VjcyArPSAxMjIxOTI5MjgwMDAwMDtcblxuICAvLyBgdGltZV9sb3dgXG4gIHZhciB0bCA9ICgobXNlY3MgJiAweGZmZmZmZmYpICogMTAwMDAgKyBuc2VjcykgJSAweDEwMDAwMDAwMDtcbiAgYltpKytdID0gdGwgPj4+IDI0ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDE2ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDggJiAweGZmO1xuICBiW2krK10gPSB0bCAmIDB4ZmY7XG5cbiAgLy8gYHRpbWVfbWlkYFxuICB2YXIgdG1oID0gKG1zZWNzIC8gMHgxMDAwMDAwMDAgKiAxMDAwMCkgJiAweGZmZmZmZmY7XG4gIGJbaSsrXSA9IHRtaCA+Pj4gOCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRtaCAmIDB4ZmY7XG5cbiAgLy8gYHRpbWVfaGlnaF9hbmRfdmVyc2lvbmBcbiAgYltpKytdID0gdG1oID4+PiAyNCAmIDB4ZiB8IDB4MTA7IC8vIGluY2x1ZGUgdmVyc2lvblxuICBiW2krK10gPSB0bWggPj4+IDE2ICYgMHhmZjtcblxuICAvLyBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGAgKFBlciA0LjIuMiAtIGluY2x1ZGUgdmFyaWFudClcbiAgYltpKytdID0gY2xvY2tzZXEgPj4+IDggfCAweDgwO1xuXG4gIC8vIGBjbG9ja19zZXFfbG93YFxuICBiW2krK10gPSBjbG9ja3NlcSAmIDB4ZmY7XG5cbiAgLy8gYG5vZGVgXG4gIGZvciAodmFyIG4gPSAwOyBuIDwgNjsgKytuKSB7XG4gICAgYltpICsgbl0gPSBub2RlW25dO1xuICB9XG5cbiAgcmV0dXJuIGJ1ZiA/IGJ1ZiA6IGJ5dGVzVG9VdWlkKGIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHYxO1xuIiwidmFyIHJuZyA9IHJlcXVpcmUoJy4vbGliL3JuZycpO1xudmFyIGJ5dGVzVG9VdWlkID0gcmVxdWlyZSgnLi9saWIvYnl0ZXNUb1V1aWQnKTtcblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBidWYgJiYgb2Zmc2V0IHx8IDA7XG5cbiAgaWYgKHR5cGVvZihvcHRpb25zKSA9PSAnc3RyaW5nJykge1xuICAgIGJ1ZiA9IG9wdGlvbnMgPT09ICdiaW5hcnknID8gbmV3IEFycmF5KDE2KSA6IG51bGw7XG4gICAgb3B0aW9ucyA9IG51bGw7XG4gIH1cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgdmFyIHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpO1xuXG4gIC8vIFBlciA0LjQsIHNldCBiaXRzIGZvciB2ZXJzaW9uIGFuZCBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGBcbiAgcm5kc1s2XSA9IChybmRzWzZdICYgMHgwZikgfCAweDQwO1xuICBybmRzWzhdID0gKHJuZHNbOF0gJiAweDNmKSB8IDB4ODA7XG5cbiAgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG4gIGlmIChidWYpIHtcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgMTY7ICsraWkpIHtcbiAgICAgIGJ1ZltpICsgaWldID0gcm5kc1tpaV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ1ZiB8fCBieXRlc1RvVXVpZChybmRzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB2NDtcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fOV9fOyJdLCJzb3VyY2VSb290IjoiIn0=