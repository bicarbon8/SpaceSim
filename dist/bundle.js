!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("phaser")):"function"==typeof define&&define.amd?define(["phaser"],e):"object"==typeof exports?exports.bundle=e(require("phaser")):t.bundle=e(t.phaser)}(window,(function(t){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Globals||(e.Globals={})},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var o=new Uint8Array(16);t.exports=function(){return n(o),o}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);t.exports=function(t,e){var o=e||0,i=n;return[i[t[o++]],i[t[o++]],i[t[o++]],i[t[o++]],"-",i[t[o++]],i[t[o++]],"-",i[t[o++]],i[t[o++]],"-",i[t[o++]],i[t[o++]],"-",i[t[o++]],i[t[o++]],i[t[o++]],i[t[o++]],i[t[o++]],i[t[o++]]].join("")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),i=n(0),a={type:Phaser.AUTO,scale:{width:window.innerWidth,height:window.innerHeight},backgroundColor:"#000000",parent:"space-sim",physics:{default:"arcade",arcade:{gravity:{x:0,y:0}}},scene:o.ShipScene};e.game=new Phaser.Game(a),window.addEventListener("resize",(function(){e.game.scale.refresh()})),i.Globals.game=e.game},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(5),r=n(0),s=n(14),c={active:!0,visible:!0,key:"ShipScene"},h=function(t){function e(){return t.call(this,c)||this}return i(e,t),e.prototype.preload=function(){this.load.image("stars","./assets/backgrounds/tileableStars.png"),this.load.image("ship-pod","./assets/sprites/ship-pod.png")},e.prototype.create=function(){var t=this;this.add.tileSprite(0,0,10*this.cameras.main.width,10*this.cameras.main.height,"stars"),this.mouse=new s.Mouse(this),this.player=new a.ShipPod(this),r.Globals.player=this.player,this.player.setTarget(this.mouse),this.setupCamera(this.player),this.input.keyboard.on("keydown-P",(function(){r.Globals.isPaused=!0})),this.input.keyboard.on("keydown-R",(function(){r.Globals.isPaused=!1})),this.mouse.onWheelUp((function(e){var n=t.cameras.main.zoom-.5;n<.1&&(n=.1),t.cameras.main.zoomTo(n)})),this.mouse.onWheelDown((function(e){var n=t.cameras.main.zoom+.5;n>1&&(n=1),t.cameras.main.zoomTo(n)}))},e.prototype.update=function(){r.Globals.isPaused||r.Globals.player.update()},e.prototype.setupCamera=function(t){this.cameras.main.backgroundColor.setFromRGB({r:0,g:0,b:0}),this.cameras.main.setZoom(1),this.cameras.main.centerOn(0,0);var e=this.cameras.main.width,n=this.cameras.main.height,o=Math.floor(e/2),i=Math.floor(n/2),a=Math.floor(o/2),r=Math.floor(i/2);this.cameras.main.startFollow(t.getGameObject(),!0),this.cameras.main.deadzone=new Phaser.Geom.Rectangle(a,r,o,i)},e}(Phaser.Scene);e.ShipScene=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(6);var o=n(7),i=n(0),a=n(11),r=n(12),s=n(13),c=function(){function t(t){this.remainingFuel=100,this.temperature=0,this.active=!0,this.id=o.RNG.guid(),this.scene=t,this.gameObj=t.physics.add.sprite(0,0,"ship-pod"),this.integrity=a.Constants.MAX_INTEGRITY,this.attachments=new Array(r.Helpers.enumLength(s.AttachmentLocation)),this.setupInputHandlers(),this.checkOverheatCondition()}return t.prototype.update=function(){!i.Globals.isPaused&&this.active&&(this.lookAtTarget(),this.thrustKey.isDown&&this.thrustFowards(),this.rotateAttachmentsClockwiseKey.isDown&&this.rotateAttachmentsClockwise(),this.rotateAttachmentsAntiClockwiseKey.isDown&&this.rotateAttachmentsAntiClockwise(),this.updateAttachments())},t.prototype.updateAttachments=function(){for(var t=0;t<this.attachments.length;t++){var e=this.attachments[t];e&&e.update()}},t.prototype.setupInputHandlers=function(){this.thrustKey=this.scene.input.keyboard.addKey("SPACE",!0,!0),this.rotateAttachmentsClockwiseKey=this.scene.input.keyboard.addKey("E",!0,!0),this.rotateAttachmentsAntiClockwiseKey=this.scene.input.keyboard.addKey("Q",!0,!0)},t.prototype.checkOverheatCondition=function(){if(!i.Globals.isPaused&&this.active){if(this.temperature>a.Constants.MAX_TEMPERATURE&&this.destroy(),this.temperature>a.Constants.MAX_SAFE_TEMPERATURE){var t=this.temperature-a.Constants.MAX_SAFE_TEMPERATURE;this.integrity-=t}this.applyCooling(a.Constants.COOLING_RATE)}setTimeout(this.checkOverheatCondition,a.Constants.OVERHEAT_CHECK_INTERVAL)},t.prototype.getRealLocation=function(){return new Phaser.Math.Vector2(this.gameObj.x,this.gameObj.y)},t.prototype.getLocation=function(){var t=this.scene.cameras.main.getWorldPoint(0,0);return new Phaser.Math.Vector2(this.gameObj.x-t.x,this.gameObj.y-t.y)},t.prototype.getId=function(){return this.id},t.prototype.getGameObject=function(){return this.gameObj},t.prototype.setTarget=function(t){this.target=t},t.prototype.lookAtTarget=function(){var t=this.target.getRealLocation(),e=Phaser.Math.Angle.Between(t.x,t.y,this.gameObj.x,this.gameObj.y);this.gameObj.setRotation(e)},t.prototype.getHeading=function(){var t=Math.cos(this.gameObj.rotation),e=Math.sin(this.gameObj.rotation);return new Phaser.Math.Vector2(t,e).normalize().negate()},t.prototype.thrustFowards=function(){if(this.remainingFuel>0){var t=this.getHeading().multiply(new Phaser.Math.Vector2(a.Constants.THRUSTER_FORCE,a.Constants.THRUSTER_FORCE));this.gameObj.body.velocity.add(t),this.reduceFuel(a.Constants.FUEL_PER_THRUST),this.applyHeating(a.Constants.HEAT_PER_THRUST)}},t.prototype.strafeLeft=function(){},t.prototype.strafeRight=function(){},t.prototype.thrustBackwards=function(){},t.prototype.applyHeating=function(t){this.temperature+=t},t.prototype.applyCooling=function(t){this.temperature-=t,this.temperature<0&&(this.temperature=0)},t.prototype.reduceFuel=function(t){this.remainingFuel-=t,this.remainingFuel<0&&(this.remainingFuel=0)},t.prototype.getIntegrity=function(){return this.integrity},t.prototype.sustainDamage=function(t){this.integrity-=t,this.integrity<=0&&(this.integrity=0,this.active=!1,this.destroy())},t.prototype.repair=function(t){this.integrity=t,this.integrity>a.Constants.MAX_INTEGRITY&&(this.integrity=a.Constants.MAX_INTEGRITY)},t.prototype.rotateAttachmentsClockwise=function(){var t=this.attachments.pop();this.attachments.unshift(t),this.updateAttachmentPositions()},t.prototype.rotateAttachmentsAntiClockwise=function(){var t=this.attachments.shift();this.attachments.push(t),this.updateAttachmentPositions()},t.prototype.updateAttachmentPositions=function(){for(var t=0;t<this.attachments.length;t++)switch(t){case s.AttachmentLocation.front:this.attachments[t].setAttachmentLocation(s.AttachmentLocation.front);break;case s.AttachmentLocation.frontRight:this.attachments[t].setAttachmentLocation(s.AttachmentLocation.frontRight);break;case s.AttachmentLocation.right:this.attachments[t].setAttachmentLocation(s.AttachmentLocation.right);break;case s.AttachmentLocation.backRight:this.attachments[t].setAttachmentLocation(s.AttachmentLocation.backRight);break;case s.AttachmentLocation.backLeft:this.attachments[t].setAttachmentLocation(s.AttachmentLocation.backLeft);break;case s.AttachmentLocation.left:this.attachments[t].setAttachmentLocation(s.AttachmentLocation.left);break;case s.AttachmentLocation.frontLeft:this.attachments[t].setAttachmentLocation(s.AttachmentLocation.frontLeft)}},t.prototype.addAttachment=function(t){this.removeAttachment(s.AttachmentLocation.front),this.attachments[s.AttachmentLocation.front]=t,t.attach(this)},t.prototype.removeAttachment=function(t){this.attachments[t].detach(),this.attachments[t]=null},t.prototype.destroy=function(){},t}();e.ShipPod=c},function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(8);!function(t){t.int=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.guid=function(){return o.v4()}}(e.RNG||(e.RNG={}))},function(t,e,n){var o=n(9),i=n(10),a=i;a.v1=o,a.v4=i,t.exports=a},function(t,e,n){var o,i,a=n(1),r=n(2),s=0,c=0;t.exports=function(t,e,n){var h=e&&n||0,u=e||[],p=(t=t||{}).node||o,f=void 0!==t.clockseq?t.clockseq:i;if(null==p||null==f){var m=a();null==p&&(p=o=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==f&&(f=i=16383&(m[6]<<8|m[7]))}var l=void 0!==t.msecs?t.msecs:(new Date).getTime(),d=void 0!==t.nsecs?t.nsecs:c+1,y=l-s+(d-c)/1e4;if(y<0&&void 0===t.clockseq&&(f=f+1&16383),(y<0||l>s)&&void 0===t.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=l,c=d,i=f;var g=(1e4*(268435455&(l+=122192928e5))+d)%4294967296;u[h++]=g>>>24&255,u[h++]=g>>>16&255,u[h++]=g>>>8&255,u[h++]=255&g;var v=l/4294967296*1e4&268435455;u[h++]=v>>>8&255,u[h++]=255&v,u[h++]=v>>>24&15|16,u[h++]=v>>>16&255,u[h++]=f>>>8|128,u[h++]=255&f;for(var b=0;b<6;++b)u[h+b]=p[b];return e||r(u)}},function(t,e,n){var o=n(1),i=n(2);t.exports=function(t,e,n){var a=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var s=0;s<16;++s)e[a+s]=r[s];return e||i(r)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.MAX_INTEGRITY=100,t.MAX_FUEL=100,t.MAX_SAFE_TEMPERATURE=100,t.MAX_TEMPERATURE=200,t.OVERHEAT_CHECK_INTERVAL=1e3,t.COOLING_RATE=.1,t.FUEL_PER_THRUST=.01,t.HEAT_PER_THRUST=.5,t.THRUSTER_FORCE=1}(e.Constants||(e.Constants={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.enumLength=function(t){var e=0;for(var n in t)isNaN(Number(n))&&e++;return e}}(e.Helpers||(e.Helpers={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.front=0]="front",t[t.frontRight=1]="frontRight",t[t.right=2]="right",t[t.backRight=3]="backRight",t[t.backLeft=4]="backLeft",t[t.left=5]="left",t[t.frontLeft=6]="frontLeft"}(e.AttachmentLocation||(e.AttachmentLocation={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.scene=t,this.scene.input.mouse.capture=!0}return t.prototype.getLocation=function(){return this.scene.input.activePointer.position.clone()},t.prototype.getRealLocation=function(){var t=this.getLocation();return this.scene.cameras.main.getWorldPoint(t.x,t.y)},t.prototype.onWheelUp=function(t){this.scene.input.on(Phaser.Input.Events.POINTER_WHEEL,(function(e,n,o,i,a,r){i>0&&t(i)}))},t.prototype.onWheelDown=function(t){this.scene.input.on(Phaser.Input.Events.POINTER_WHEEL,(function(e,n,o,i,a,r){i<0&&t(-i)}))},t}();e.Mouse=o}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9idW5kbGUvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2J1bmRsZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9idW5kbGUvLi9zcmMvdXRpbGl0aWVzL2dsb2JhbHMudHMiLCJ3ZWJwYWNrOi8vYnVuZGxlLy4vbm9kZV9tb2R1bGVzL3V1aWQvbGliL3JuZy1icm93c2VyLmpzIiwid2VicGFjazovL2J1bmRsZS8uL25vZGVfbW9kdWxlcy91dWlkL2xpYi9ieXRlc1RvVXVpZC5qcyIsIndlYnBhY2s6Ly9idW5kbGUvLi9zcmMvZ2FtZS50cyIsIndlYnBhY2s6Ly9idW5kbGUvLi9zcmMvc2NlbmVzL3NoaXAtc2NlbmUudHMiLCJ3ZWJwYWNrOi8vYnVuZGxlLy4vc3JjL3NoaXBzL3NoaXAtcG9kLnRzIiwid2VicGFjazovL2J1bmRsZS9leHRlcm5hbCBcInBoYXNlclwiIiwid2VicGFjazovL2J1bmRsZS8uL3NyYy91dGlsaXRpZXMvcm5nLnRzIiwid2VicGFjazovL2J1bmRsZS8uL25vZGVfbW9kdWxlcy91dWlkL2luZGV4LmpzIiwid2VicGFjazovL2J1bmRsZS8uL25vZGVfbW9kdWxlcy91dWlkL3YxLmpzIiwid2VicGFjazovL2J1bmRsZS8uL25vZGVfbW9kdWxlcy91dWlkL3Y0LmpzIiwid2VicGFjazovL2J1bmRsZS8uL3NyYy91dGlsaXRpZXMvY29uc3RhbnRzLnRzIiwid2VicGFjazovL2J1bmRsZS8uL3NyYy91dGlsaXRpZXMvaGVscGVycy50cyIsIndlYnBhY2s6Ly9idW5kbGUvLi9zcmMvc2hpcHMvYXR0YWNobWVudHMvYXR0YWNobWVudC1sb2NhdGlvbi50cyIsIndlYnBhY2s6Ly9idW5kbGUvLi9zcmMvdXRpbGl0aWVzL21vdXNlLnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX182X18iLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiR2xvYmFscyIsImdldFJhbmRvbVZhbHVlcyIsImNyeXB0byIsIm1zQ3J5cHRvIiwicm5kczgiLCJVaW50OEFycmF5Iiwicm5kcyIsIkFycmF5IiwiTWF0aCIsInJhbmRvbSIsImJ5dGVUb0hleCIsInRvU3RyaW5nIiwic3Vic3RyIiwiYnVmIiwib2Zmc2V0IiwiYnRoIiwiam9pbiIsImdhbWVDb25maWciLCJ0eXBlIiwiUGhhc2VyIiwiQVVUTyIsInNjYWxlIiwid2lkdGgiLCJpbm5lcldpZHRoIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJwYXJlbnQiLCJwaHlzaWNzIiwiZGVmYXVsdCIsImFyY2FkZSIsImdyYXZpdHkiLCJ4IiwieSIsInNjZW5lIiwiU2hpcFNjZW5lIiwiZ2FtZSIsIkdhbWUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVmcmVzaCIsInNjZW5lQ29uZmlnIiwiYWN0aXZlIiwidmlzaWJsZSIsInByZWxvYWQiLCJ0aGlzIiwibG9hZCIsImltYWdlIiwiYWRkIiwidGlsZVNwcml0ZSIsImNhbWVyYXMiLCJtYWluIiwibW91c2UiLCJNb3VzZSIsInBsYXllciIsIlNoaXBQb2QiLCJzZXRUYXJnZXQiLCJzZXR1cENhbWVyYSIsImlucHV0Iiwia2V5Ym9hcmQiLCJvbiIsImlzUGF1c2VkIiwib25XaGVlbFVwIiwic2Nyb2xsQW1vdW50IiwibmV3Wm9vbSIsInpvb20iLCJ6b29tVG8iLCJvbldoZWVsRG93biIsInVwZGF0ZSIsInNldEZyb21SR0IiLCJnIiwiYiIsInNldFpvb20iLCJjZW50ZXJPbiIsImR6V2lkdGgiLCJmbG9vciIsImR6SGVpZ2h0IiwiZHpYIiwiZHpZIiwic3RhcnRGb2xsb3ciLCJnZXRHYW1lT2JqZWN0IiwiZGVhZHpvbmUiLCJHZW9tIiwiUmVjdGFuZ2xlIiwiU2NlbmUiLCJyZW1haW5pbmdGdWVsIiwidGVtcGVyYXR1cmUiLCJpZCIsIlJORyIsImd1aWQiLCJnYW1lT2JqIiwic3ByaXRlIiwiaW50ZWdyaXR5IiwiQ29uc3RhbnRzIiwiTUFYX0lOVEVHUklUWSIsImF0dGFjaG1lbnRzIiwiSGVscGVycyIsImVudW1MZW5ndGgiLCJBdHRhY2htZW50TG9jYXRpb24iLCJzZXR1cElucHV0SGFuZGxlcnMiLCJjaGVja092ZXJoZWF0Q29uZGl0aW9uIiwibG9va0F0VGFyZ2V0IiwidGhydXN0S2V5IiwiaXNEb3duIiwidGhydXN0Rm93YXJkcyIsInJvdGF0ZUF0dGFjaG1lbnRzQ2xvY2t3aXNlS2V5Iiwicm90YXRlQXR0YWNobWVudHNDbG9ja3dpc2UiLCJyb3RhdGVBdHRhY2htZW50c0FudGlDbG9ja3dpc2VLZXkiLCJyb3RhdGVBdHRhY2htZW50c0FudGlDbG9ja3dpc2UiLCJ1cGRhdGVBdHRhY2htZW50cyIsImxlbmd0aCIsImEiLCJhZGRLZXkiLCJNQVhfVEVNUEVSQVRVUkUiLCJkZXN0cm95IiwiTUFYX1NBRkVfVEVNUEVSQVRVUkUiLCJkZWx0YSIsImFwcGx5Q29vbGluZyIsIkNPT0xJTkdfUkFURSIsInNldFRpbWVvdXQiLCJPVkVSSEVBVF9DSEVDS19JTlRFUlZBTCIsImdldFJlYWxMb2NhdGlvbiIsIlZlY3RvcjIiLCJnZXRMb2NhdGlvbiIsImNhbWVyYVBvcyIsImdldFdvcmxkUG9pbnQiLCJnZXRJZCIsInRhcmdldCIsInBvcyIsInJhZGlhbnMiLCJBbmdsZSIsIkJldHdlZW4iLCJzZXRSb3RhdGlvbiIsImdldEhlYWRpbmciLCJjb3MiLCJyb3RhdGlvbiIsInNpbiIsIm5vcm1hbGl6ZSIsIm5lZ2F0ZSIsImRlbHRhViIsIm11bHRpcGx5IiwiVEhSVVNURVJfRk9SQ0UiLCJib2R5IiwidmVsb2NpdHkiLCJyZWR1Y2VGdWVsIiwiRlVFTF9QRVJfVEhSVVNUIiwiYXBwbHlIZWF0aW5nIiwiSEVBVF9QRVJfVEhSVVNUIiwic3RyYWZlTGVmdCIsInN0cmFmZVJpZ2h0IiwidGhydXN0QmFja3dhcmRzIiwiZGVncmVlcyIsImFtb3VudCIsImdldEludGVncml0eSIsInN1c3RhaW5EYW1hZ2UiLCJyZXBhaXIiLCJsYXN0IiwicG9wIiwidW5zaGlmdCIsInVwZGF0ZUF0dGFjaG1lbnRQb3NpdGlvbnMiLCJmaXJzdCIsInNoaWZ0IiwicHVzaCIsImZyb250Iiwic2V0QXR0YWNobWVudExvY2F0aW9uIiwiZnJvbnRSaWdodCIsInJpZ2h0IiwiYmFja1JpZ2h0IiwiYmFja0xlZnQiLCJsZWZ0IiwiZnJvbnRMZWZ0IiwiYWRkQXR0YWNobWVudCIsImF0dGFjaG1lbnQiLCJyZW1vdmVBdHRhY2htZW50IiwiYXR0YWNoIiwibG9jYXRpb24iLCJkZXRhY2giLCJpbnQiLCJtaW4iLCJtYXgiLCJ2NCIsInYxIiwidXVpZCIsIl9ub2RlSWQiLCJfY2xvY2tzZXEiLCJybmciLCJieXRlc1RvVXVpZCIsIl9sYXN0TVNlY3MiLCJfbGFzdE5TZWNzIiwib3B0aW9ucyIsIm5vZGUiLCJjbG9ja3NlcSIsInVuZGVmaW5lZCIsInNlZWRCeXRlcyIsIm1zZWNzIiwiRGF0ZSIsImdldFRpbWUiLCJuc2VjcyIsImR0IiwiRXJyb3IiLCJ0bCIsInRtaCIsImlpIiwiTUFYX0ZVRUwiLCJlbnVtVHlwZSIsImNvdW50IiwiaXRlbSIsImlzTmFOIiwiTnVtYmVyIiwiY2FwdHVyZSIsImFjdGl2ZVBvaW50ZXIiLCJwb3NpdGlvbiIsImNsb25lIiwibG9jIiwiZnVuYyIsIklucHV0IiwiRXZlbnRzIiwiUE9JTlRFUl9XSEVFTCIsInBvaW50ZXIiLCJjdXJyZW50bHlPdmVyIiwiZHgiLCJkeSIsImR6IiwiZXZlbnQiXSwibWFwcGluZ3MiOiJDQUFBLFNBQTJDQSxFQUFNQyxHQUMxQixpQkFBWkMsU0FBMEMsaUJBQVhDLE9BQ3hDQSxPQUFPRCxRQUFVRCxFQUFRRyxRQUFRLFdBQ1IsbUJBQVhDLFFBQXlCQSxPQUFPQyxJQUM5Q0QsT0FBTyxDQUFDLFVBQVdKLEdBQ08saUJBQVpDLFFBQ2RBLFFBQWdCLE9BQUlELEVBQVFHLFFBQVEsV0FFcENKLEVBQWEsT0FBSUMsRUFBUUQsRUFBYSxRQVJ4QyxDQVNHTyxRQUFRLFNBQVNDLEdBQ3BCLE8sWUNURSxJQUFJQyxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVVCxRQUduQyxJQUFJQyxFQUFTTSxFQUFpQkUsR0FBWSxDQUN6Q0MsRUFBR0QsRUFDSEUsR0FBRyxFQUNIWCxRQUFTLElBVVYsT0FOQVksRUFBUUgsR0FBVUksS0FBS1osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU1EsR0FHL0RQLEVBQU9VLEdBQUksRUFHSlYsRUFBT0QsUUEwRGYsT0FyREFRLEVBQW9CTSxFQUFJRixFQUd4QkosRUFBb0JPLEVBQUlSLEVBR3hCQyxFQUFvQlEsRUFBSSxTQUFTaEIsRUFBU2lCLEVBQU1DLEdBQzNDVixFQUFvQlcsRUFBRW5CLEVBQVNpQixJQUNsQ0csT0FBT0MsZUFBZXJCLEVBQVNpQixFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVWLEVBQW9CZ0IsRUFBSSxTQUFTeEIsR0FDWCxvQkFBWHlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZXJCLEVBQVN5QixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWVyQixFQUFTLGFBQWMsQ0FBRTJCLE9BQU8sS0FRdkRuQixFQUFvQm9CLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMs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QSxTQUFzQ3dKLEdBQ2xDekssS0FBS1YsTUFBTXVCLE1BQU1FLEdBQUd4QyxPQUFPbU0sTUFBTUMsT0FBT0MsZUFBZSxTQUFDQyxFQUFTQyxFQUFlQyxFQUFJQyxFQUFJQyxFQUFJQyxHQUNwRkYsRUFBSyxHQUNMUCxFQUFLTyxPQUtqQixZQUFBMUosWUFBQSxTQUF3Q21KLEdBQ3BDekssS0FBS1YsTUFBTXVCLE1BQU1FLEdBQUd4QyxPQUFPbU0sTUFBTUMsT0FBT0MsZUFBZSxTQUFDQyxFQUFTQyxFQUFlQyxFQUFJQyxFQUFJQyxFQUFJQyxHQUNwRkYsRUFBSyxHQUNMUCxHQUFNTyxPQUl0QixFQTNDQSxHQUFhLEVBQUF4SyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJwaGFzZXJcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wicGhhc2VyXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImJ1bmRsZVwiXSA9IGZhY3RvcnkocmVxdWlyZShcInBoYXNlclwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiYnVuZGxlXCJdID0gZmFjdG9yeShyb290W1wicGhhc2VyXCJdKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNl9fKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuIiwiaW1wb3J0IHsgU2hpcFBvZCB9IGZyb20gXCIuLi9zaGlwcy9zaGlwLXBvZFwiO1xyXG5cclxuZXhwb3J0IG1vZHVsZSBHbG9iYWxzIHtcclxuICAgIGV4cG9ydCB2YXIgaXNQYXVzZWQ6IGJvb2xlYW47XHJcbiAgICBleHBvcnQgdmFyIHBsYXllcjogU2hpcFBvZDtcclxuICAgIGV4cG9ydCB2YXIgZ2FtZTogUGhhc2VyLkdhbWU7XHJcbn0iLCIvLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiAgSW4gdGhlXG4vLyBicm93c2VyIHRoaXMgaXMgYSBsaXR0bGUgY29tcGxpY2F0ZWQgZHVlIHRvIHVua25vd24gcXVhbGl0eSBvZiBNYXRoLnJhbmRvbSgpXG4vLyBhbmQgaW5jb25zaXN0ZW50IHN1cHBvcnQgZm9yIHRoZSBgY3J5cHRvYCBBUEkuICBXZSBkbyB0aGUgYmVzdCB3ZSBjYW4gdmlhXG4vLyBmZWF0dXJlLWRldGVjdGlvblxuXG4vLyBnZXRSYW5kb21WYWx1ZXMgbmVlZHMgdG8gYmUgaW52b2tlZCBpbiBhIGNvbnRleHQgd2hlcmUgXCJ0aGlzXCIgaXMgYSBDcnlwdG9cbi8vIGltcGxlbWVudGF0aW9uLiBBbHNvLCBmaW5kIHRoZSBjb21wbGV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBjcnlwdG8gb24gSUUxMS5cbnZhciBnZXRSYW5kb21WYWx1ZXMgPSAodHlwZW9mKGNyeXB0bykgIT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mKG1zQ3J5cHRvKSAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93Lm1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcyA9PSAnZnVuY3Rpb24nICYmIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKG1zQ3J5cHRvKSk7XG5cbmlmIChnZXRSYW5kb21WYWx1ZXMpIHtcbiAgLy8gV0hBVFdHIGNyeXB0byBSTkcgLSBodHRwOi8vd2lraS53aGF0d2cub3JnL3dpa2kvQ3J5cHRvXG4gIHZhciBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gd2hhdHdnUk5HKCkge1xuICAgIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG4gICAgcmV0dXJuIHJuZHM4O1xuICB9O1xufSBlbHNlIHtcbiAgLy8gTWF0aC5yYW5kb20oKS1iYXNlZCAoUk5HKVxuICAvL1xuICAvLyBJZiBhbGwgZWxzZSBmYWlscywgdXNlIE1hdGgucmFuZG9tKCkuICBJdCdzIGZhc3QsIGJ1dCBpcyBvZiB1bnNwZWNpZmllZFxuICAvLyBxdWFsaXR5LlxuICB2YXIgcm5kcyA9IG5ldyBBcnJheSgxNik7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtYXRoUk5HKCkge1xuICAgIGZvciAodmFyIGkgPSAwLCByOyBpIDwgMTY7IGkrKykge1xuICAgICAgaWYgKChpICYgMHgwMykgPT09IDApIHIgPSBNYXRoLnJhbmRvbSgpICogMHgxMDAwMDAwMDA7XG4gICAgICBybmRzW2ldID0gciA+Pj4gKChpICYgMHgwMykgPDwgMykgJiAweGZmO1xuICAgIH1cblxuICAgIHJldHVybiBybmRzO1xuICB9O1xufVxuIiwiLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG52YXIgYnl0ZVRvSGV4ID0gW107XG5mb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleFtpXSA9IChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSk7XG59XG5cbmZ1bmN0aW9uIGJ5dGVzVG9VdWlkKGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gb2Zmc2V0IHx8IDA7XG4gIHZhciBidGggPSBieXRlVG9IZXg7XG4gIC8vIGpvaW4gdXNlZCB0byBmaXggbWVtb3J5IGlzc3VlIGNhdXNlZCBieSBjb25jYXRlbmF0aW9uOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMTc1I2M0XG4gIHJldHVybiAoW1xuICAgIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuICAgIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuICAgIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSxcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dXG4gIF0pLmpvaW4oJycpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJ5dGVzVG9VdWlkO1xuIiwiaW1wb3J0IHsgU2hpcFNjZW5lIH0gZnJvbSBcIi4vc2NlbmVzL3NoaXAtc2NlbmVcIjtcclxuaW1wb3J0IHsgR2xvYmFscyB9IGZyb20gXCIuL3V0aWxpdGllcy9nbG9iYWxzXCI7XHJcblxyXG5jb25zdCBnYW1lQ29uZmlnOiBQaGFzZXIuVHlwZXMuQ29yZS5HYW1lQ29uZmlnID0ge1xyXG4gICAgdHlwZTogUGhhc2VyLkFVVE8sXHJcbiAgICBzY2FsZToge1xyXG4gICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCxcclxuICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodFxyXG4gICAgfSxcclxuICAgIGJhY2tncm91bmRDb2xvcjogJyMwMDAwMDAnLFxyXG4gICAgcGFyZW50OiAnc3BhY2Utc2ltJyxcclxuICAgIHBoeXNpY3M6IHtcclxuICAgICAgICBkZWZhdWx0OiAnYXJjYWRlJyxcclxuICAgICAgICBhcmNhZGU6IHtcclxuICAgICAgICAgICAgZ3Jhdml0eTogeyB4OiAwLCB5OiAwIH0sXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNjZW5lOiBTaGlwU2NlbmVcclxufTtcclxuZXhwb3J0IGNvbnN0IGdhbWU6IFBoYXNlci5HYW1lID0gbmV3IFBoYXNlci5HYW1lKGdhbWVDb25maWcpO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgIGdhbWUuc2NhbGUucmVmcmVzaCgpO1xyXG59KTtcclxuXHJcbkdsb2JhbHMuZ2FtZSA9IGdhbWU7IiwiaW1wb3J0IHsgU2hpcFBvZCB9IGZyb20gXCIuLi9zaGlwcy9zaGlwLXBvZFwiO1xyXG5pbXBvcnQgeyBHbG9iYWxzIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9nbG9iYWxzXCI7XHJcbmltcG9ydCB7IE1vdXNlIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9tb3VzZVwiO1xyXG5cclxuY29uc3Qgc2NlbmVDb25maWc6IFBoYXNlci5UeXBlcy5TY2VuZXMuU2V0dGluZ3NDb25maWcgPSB7XHJcbiAgICBhY3RpdmU6IHRydWUsXHJcbiAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAga2V5OiAnU2hpcFNjZW5lJ1xyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIFNoaXBTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgICBwcml2YXRlIG1vdXNlOiBNb3VzZTtcclxuICAgIHByaXZhdGUgcGxheWVyOiBTaGlwUG9kO1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihzY2VuZUNvbmZpZyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHByZWxvYWQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdzdGFycycsICcuL2Fzc2V0cy9iYWNrZ3JvdW5kcy90aWxlYWJsZVN0YXJzLnBuZycpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnc2hpcC1wb2QnLCAnLi9hc3NldHMvc3ByaXRlcy9zaGlwLXBvZC5wbmcnKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY3JlYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYWRkLnRpbGVTcHJpdGUoMCwgMCwgdGhpcy5jYW1lcmFzLm1haW4ud2lkdGggKiAxMCwgdGhpcy5jYW1lcmFzLm1haW4uaGVpZ2h0ICogMTAsICdzdGFycycpO1xyXG5cclxuICAgICAgICB0aGlzLm1vdXNlID0gbmV3IE1vdXNlKHRoaXMpO1xyXG4gICAgICAgIHRoaXMucGxheWVyID0gbmV3IFNoaXBQb2QodGhpcyk7XHJcbiAgICAgICAgR2xvYmFscy5wbGF5ZXIgPSB0aGlzLnBsYXllcjtcclxuICAgICAgICB0aGlzLnBsYXllci5zZXRUYXJnZXQodGhpcy5tb3VzZSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0dXBDYW1lcmEodGhpcy5wbGF5ZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuaW5wdXQua2V5Ym9hcmQub24oJ2tleWRvd24tUCcsICgpID0+IHtcclxuICAgICAgICAgICAgR2xvYmFscy5pc1BhdXNlZCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5rZXlib2FyZC5vbigna2V5ZG93bi1SJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBHbG9iYWxzLmlzUGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5tb3VzZS5vbldoZWVsVXAoKHNjcm9sbEFtb3VudDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50Wm9vbTogbnVtYmVyID0gdGhpcy5jYW1lcmFzLm1haW4uem9vbTtcclxuICAgICAgICAgICAgLy8gem9vbSBvdXRcclxuICAgICAgICAgICAgbGV0IG5ld1pvb206IG51bWJlciA9IGN1cnJlbnRab29tIC0gMC41O1xyXG4gICAgICAgICAgICBpZiAobmV3Wm9vbSA8IDAuMSkge1xyXG4gICAgICAgICAgICAgICAgbmV3Wm9vbSA9IDAuMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgem9vbWluZyBmcm9tICR7Y3VycmVudFpvb219IHRvICR7bmV3Wm9vbX1gKTtcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4uem9vbVRvKG5ld1pvb20pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubW91c2Uub25XaGVlbERvd24oKHNjcm9sbEFtb3VudDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50Wm9vbTogbnVtYmVyID0gdGhpcy5jYW1lcmFzLm1haW4uem9vbTtcclxuICAgICAgICAgICAgLy8gem9vbSBpblxyXG4gICAgICAgICAgICBsZXQgbmV3Wm9vbTogbnVtYmVyID0gY3VycmVudFpvb20gKyAwLjU7XHJcbiAgICAgICAgICAgIGlmIChuZXdab29tID4gMSkge1xyXG4gICAgICAgICAgICAgICAgbmV3Wm9vbSA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYHpvb21pbmcgZnJvbSAke2N1cnJlbnRab29tfSB0byAke25ld1pvb219YCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLnpvb21UbyhuZXdab29tKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghR2xvYmFscy5pc1BhdXNlZCkge1xyXG4gICAgICAgICAgICBHbG9iYWxzLnBsYXllci51cGRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXR1cENhbWVyYShwbGF5ZXI6IFNoaXBQb2QpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNhbWVyYXMubWFpbi5iYWNrZ3JvdW5kQ29sb3Iuc2V0RnJvbVJHQih7cjogMCwgZzogMCwgYjogMH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLnNldFpvb20oMSk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4uY2VudGVyT24oMCwgMCk7XHJcblxyXG4gICAgICAgIGxldCB3aWR0aDogbnVtYmVyID0gdGhpcy5jYW1lcmFzLm1haW4ud2lkdGg7XHJcbiAgICAgICAgbGV0IGhlaWdodDogbnVtYmVyID0gdGhpcy5jYW1lcmFzLm1haW4uaGVpZ2h0O1xyXG4gICAgICAgIGxldCBkeldpZHRoOiBudW1iZXIgPSBNYXRoLmZsb29yKHdpZHRoIC8gMik7XHJcbiAgICAgICAgbGV0IGR6SGVpZ2h0OiBudW1iZXIgPSBNYXRoLmZsb29yKGhlaWdodCAvIDIpO1xyXG4gICAgICAgIGxldCBkelg6IG51bWJlciA9IE1hdGguZmxvb3IoZHpXaWR0aCAvIDIpO1xyXG4gICAgICAgIGxldCBkelk6IG51bWJlciA9IE1hdGguZmxvb3IoZHpIZWlnaHQgLyAyKTtcclxuICAgICAgICB0aGlzLmNhbWVyYXMubWFpbi5zdGFydEZvbGxvdyhwbGF5ZXIuZ2V0R2FtZU9iamVjdCgpLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmNhbWVyYXMubWFpbi5kZWFkem9uZSA9IG5ldyBQaGFzZXIuR2VvbS5SZWN0YW5nbGUoZHpYLCBkelksIGR6V2lkdGgsIGR6SGVpZ2h0KTtcclxuICAgIH1cclxufSIsImltcG9ydCBcInBoYXNlclwiO1xyXG5pbXBvcnQgeyBSTkcgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL3JuZ1wiO1xyXG5pbXBvcnQgeyBVcGRhdGFibGUgfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy91cGRhdGFibGVcIjtcclxuaW1wb3J0IHsgQ2FuVGFyZ2V0IH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvY2FuLXRhcmdldFwiO1xyXG5pbXBvcnQgeyBDYW5UaHJ1c3QgfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9jYW4tdGhydXN0XCI7XHJcbmltcG9ydCB7IEhhc0xvY2F0aW9uIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvaGFzLWxvY2F0aW9uXCI7XHJcbmltcG9ydCB7IEhhc0dhbWVPYmplY3QgfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9oYXMtZ2FtZS1vYmplY3RcIjtcclxuaW1wb3J0IHsgR2xvYmFscyB9IGZyb20gXCIuLi91dGlsaXRpZXMvZ2xvYmFsc1wiO1xyXG5pbXBvcnQgeyBIYXNJbnRlZ3JpdHkgfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9oYXMtaW50ZWdyaXR5XCI7XHJcbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gXCIuLi91dGlsaXRpZXMvY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IFNoaXBBdHRhY2htZW50IH0gZnJvbSBcIi4vYXR0YWNobWVudHMvc2hpcC1hdHRhY2htZW50XCI7XHJcbmltcG9ydCB7IEhhc0F0dGFjaG1lbnRzIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvaGFzLWF0dGFjaG1lbnRzXCI7XHJcbmltcG9ydCB7IEhlbHBlcnMgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2hlbHBlcnNcIjtcclxuaW1wb3J0IHsgQXR0YWNobWVudExvY2F0aW9uIH0gZnJvbSBcIi4vYXR0YWNobWVudHMvYXR0YWNobWVudC1sb2NhdGlvblwiO1xyXG5pbXBvcnQgeyBIYXNUZW1wZXJhdHVyZSB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL2hhcy10ZW1wZXJhdHVyZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNoaXBQb2QgaW1wbGVtZW50cyBVcGRhdGFibGUsIENhblRhcmdldCwgQ2FuVGhydXN0LCBIYXNMb2NhdGlvbiwgSGFzR2FtZU9iamVjdCwgSGFzSW50ZWdyaXR5LCBIYXNBdHRhY2htZW50cywgSGFzVGVtcGVyYXR1cmUge1xyXG4gICAgcHJpdmF0ZSBpZDogc3RyaW5nOyAvLyBVVUlEXHJcbiAgICBwcml2YXRlIHNjZW5lOiBQaGFzZXIuU2NlbmU7XHJcbiAgICBwcml2YXRlIGdhbWVPYmo6IFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGU7XHJcbiAgICBwcml2YXRlIHRhcmdldDogSGFzTG9jYXRpb247XHJcbiAgICBwcml2YXRlIGludGVncml0eTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBhdHRhY2htZW50czogU2hpcEF0dGFjaG1lbnRbXTtcclxuICAgIHByaXZhdGUgdGhydXN0S2V5OiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5O1xyXG4gICAgcHJpdmF0ZSByb3RhdGVBdHRhY2htZW50c0Nsb2Nrd2lzZUtleTogUGhhc2VyLklucHV0LktleWJvYXJkLktleTtcclxuICAgIHByaXZhdGUgcm90YXRlQXR0YWNobWVudHNBbnRpQ2xvY2t3aXNlS2V5OiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5O1xyXG4gICAgcHJpdmF0ZSByZW1haW5pbmdGdWVsOiBudW1iZXIgPSAxMDA7XHJcbiAgICBwcml2YXRlIHRlbXBlcmF0dXJlOiBudW1iZXIgPSAwOyAvLyBpbiBDZWxjaXVzXHJcblxyXG4gICAgYWN0aXZlOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFBoYXNlci5TY2VuZSkge1xyXG4gICAgICAgIHRoaXMuaWQgPSBSTkcuZ3VpZCgpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgICAgICB0aGlzLmdhbWVPYmogPSBzY2VuZS5waHlzaWNzLmFkZC5zcHJpdGUoMCwgMCwgJ3NoaXAtcG9kJyk7XHJcblxyXG4gICAgICAgIHRoaXMuaW50ZWdyaXR5ID0gQ29uc3RhbnRzLk1BWF9JTlRFR1JJVFk7XHJcbiAgICAgICAgdGhpcy5hdHRhY2htZW50cyA9IG5ldyBBcnJheTxTaGlwQXR0YWNobWVudD4oSGVscGVycy5lbnVtTGVuZ3RoKEF0dGFjaG1lbnRMb2NhdGlvbikpO1xyXG5cclxuICAgICAgICB0aGlzLnNldHVwSW5wdXRIYW5kbGVycygpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tPdmVyaGVhdENvbmRpdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIUdsb2JhbHMuaXNQYXVzZWQgJiYgdGhpcy5hY3RpdmUpIHtcclxuICAgICAgICAgICAgdGhpcy5sb29rQXRUYXJnZXQoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGhydXN0S2V5LmlzRG93bikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aHJ1c3RGb3dhcmRzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMucm90YXRlQXR0YWNobWVudHNDbG9ja3dpc2VLZXkuaXNEb3duKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZUF0dGFjaG1lbnRzQ2xvY2t3aXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMucm90YXRlQXR0YWNobWVudHNBbnRpQ2xvY2t3aXNlS2V5LmlzRG93bikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVBdHRhY2htZW50c0FudGlDbG9ja3dpc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUF0dGFjaG1lbnRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlQXR0YWNobWVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHRoaXMuYXR0YWNobWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGE6IFNoaXBBdHRhY2htZW50ID0gdGhpcy5hdHRhY2htZW50c1tpXTtcclxuICAgICAgICAgICAgaWYgKGEpIHtcclxuICAgICAgICAgICAgICAgIGEudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXR1cElucHV0SGFuZGxlcnMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50aHJ1c3RLZXkgPSB0aGlzLnNjZW5lLmlucHV0LmtleWJvYXJkLmFkZEtleSgnU1BBQ0UnLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICB0aGlzLnJvdGF0ZUF0dGFjaG1lbnRzQ2xvY2t3aXNlS2V5ID0gdGhpcy5zY2VuZS5pbnB1dC5rZXlib2FyZC5hZGRLZXkoJ0UnLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICB0aGlzLnJvdGF0ZUF0dGFjaG1lbnRzQW50aUNsb2Nrd2lzZUtleSA9IHRoaXMuc2NlbmUuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KCdRJywgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBjaGVja3MgZm9yIGFuZCBhcHBsaWVzIGRhbWFnZSBiYXNlZCBvbiBkZWdyZWVzIG92ZXIgc2FmZSB0ZW1wZXJhdHVyZSBhdCBhIHJhdGVcclxuICAgICAqIGRlZmluZWQgYnkge0NvbnN0YW50cy5PVkVSSEVBVF9DSEVDS19JTlRFUlZBTH0gbWlsbGlzZWNvbmRzIGJldHdlZW4gZWFjaCBjaGVjay5cclxuICAgICAqIGFsc28gYXBwbGllcyBjb29saW5nIGF0IGEgcmF0ZSBvZiB7Q29uc3RhbnRzLkNPT0xJTkdfUkFURX1cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjaGVja092ZXJoZWF0Q29uZGl0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghR2xvYmFscy5pc1BhdXNlZCAmJiB0aGlzLmFjdGl2ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50ZW1wZXJhdHVyZSA+IENvbnN0YW50cy5NQVhfVEVNUEVSQVRVUkUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpOyAvLyB3ZSBhcmUgZGVhZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRlbXBlcmF0dXJlID4gQ29uc3RhbnRzLk1BWF9TQUZFX1RFTVBFUkFUVVJFKSB7XHJcbiAgICAgICAgICAgICAgICAvLyByZWR1Y2UgaW50ZWdyaXR5IGJhc2VkIG9uIGRlZ3JlZXMgb3ZlciBzYWZlIG9wZXJhdGluZyB0ZW1wXHJcbiAgICAgICAgICAgICAgICBsZXQgZGVsdGE6IG51bWJlciA9IHRoaXMudGVtcGVyYXR1cmUgLSBDb25zdGFudHMuTUFYX1NBRkVfVEVNUEVSQVRVUkU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmludGVncml0eSAtPSBkZWx0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmFwcGx5Q29vbGluZyhDb25zdGFudHMuQ09PTElOR19SQVRFKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0VGltZW91dCh0aGlzLmNoZWNrT3ZlcmhlYXRDb25kaXRpb24sIENvbnN0YW50cy5PVkVSSEVBVF9DSEVDS19JTlRFUlZBTCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUT0RPOiBuZWVkZWQgc28gd2UgY2FuIHVzZSBGbG9hdGluZyBPcmlnaW5cclxuICAgICAqL1xyXG4gICAgZ2V0UmVhbExvY2F0aW9uKCk6IFBoYXNlci5NYXRoLlZlY3RvcjIge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhhc2VyLk1hdGguVmVjdG9yMih0aGlzLmdhbWVPYmoueCwgdGhpcy5nYW1lT2JqLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogdGhlIGxvY2F0aW9uIHdpdGhpbiB0aGUgdmlld2FibGUgYXJlYVxyXG4gICAgICogQHJldHVybnMgYSB7UGhhc2VyLk1hdGguVmVjdG9yMn0gb2Zmc2V0IGZvciBsb2NhdGlvbiB3aXRoaW4gY3VycmVudCBcclxuICAgICAqIHZpZXdhYmxlIGFyZWFcclxuICAgICAqL1xyXG4gICAgZ2V0TG9jYXRpb24oKTogUGhhc2VyLk1hdGguVmVjdG9yMiB7XHJcbiAgICAgICAgbGV0IGNhbWVyYVBvczogUGhhc2VyLk1hdGguVmVjdG9yMiA9IHRoaXMuc2NlbmUuY2FtZXJhcy5tYWluLmdldFdvcmxkUG9pbnQoMCwgMCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaGFzZXIuTWF0aC5WZWN0b3IyKHRoaXMuZ2FtZU9iai54IC0gY2FtZXJhUG9zLngsIHRoaXMuZ2FtZU9iai55IC0gY2FtZXJhUG9zLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldElkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0R2FtZU9iamVjdCgpOiBQaGFzZXIuR2FtZU9iamVjdHMuR2FtZU9iamVjdCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2FtZU9iajtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUYXJnZXQodGFyZ2V0OiBIYXNMb2NhdGlvbikge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgfVxyXG5cclxuICAgIGxvb2tBdFRhcmdldCgpOiB2b2lkIHtcclxuICAgICAgICBsZXQgcG9zID0gdGhpcy50YXJnZXQuZ2V0UmVhbExvY2F0aW9uKCk7XHJcbiAgICAgICAgbGV0IHJhZGlhbnM6IG51bWJlciA9IFBoYXNlci5NYXRoLkFuZ2xlLkJldHdlZW4ocG9zLngsIHBvcy55LCB0aGlzLmdhbWVPYmoueCwgdGhpcy5nYW1lT2JqLnkpO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iai5zZXRSb3RhdGlvbihyYWRpYW5zKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRIZWFkaW5nKCk6IFBoYXNlci5NYXRoLlZlY3RvcjIge1xyXG4gICAgICAgIGxldCB4OiBudW1iZXIgPSBNYXRoLmNvcyh0aGlzLmdhbWVPYmoucm90YXRpb24pO1xyXG4gICAgICAgIGxldCB5OiBudW1iZXIgPSBNYXRoLnNpbih0aGlzLmdhbWVPYmoucm90YXRpb24pO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhhc2VyLk1hdGguVmVjdG9yMih4LCB5KS5ub3JtYWxpemUoKS5uZWdhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aHJ1c3RGb3dhcmRzKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnJlbWFpbmluZ0Z1ZWwgPiAwKSB7XHJcbiAgICAgICAgICAgIGxldCBoZWFkaW5nOiBQaGFzZXIuTWF0aC5WZWN0b3IyID0gdGhpcy5nZXRIZWFkaW5nKCk7XHJcbiAgICAgICAgICAgIGxldCBkZWx0YVY6IFBoYXNlci5NYXRoLlZlY3RvcjIgPSBoZWFkaW5nLm11bHRpcGx5KG5ldyBQaGFzZXIuTWF0aC5WZWN0b3IyKENvbnN0YW50cy5USFJVU1RFUl9GT1JDRSwgQ29uc3RhbnRzLlRIUlVTVEVSX0ZPUkNFKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZU9iai5ib2R5LnZlbG9jaXR5LmFkZChkZWx0YVYpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWR1Y2VGdWVsKENvbnN0YW50cy5GVUVMX1BFUl9USFJVU1QpO1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5SGVhdGluZyhDb25zdGFudHMuSEVBVF9QRVJfVEhSVVNUKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RyYWZlTGVmdCgpOiB2b2lkIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgc3RyYWZlUmlnaHQoKTogdm9pZCB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHRocnVzdEJhY2t3YXJkcygpOiB2b2lkIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHlIZWF0aW5nKGRlZ3JlZXM6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudGVtcGVyYXR1cmUgKz0gZGVncmVlcztcclxuICAgIH1cclxuXHJcbiAgICBhcHBseUNvb2xpbmcoZGVncmVlczogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50ZW1wZXJhdHVyZSAtPSBkZWdyZWVzO1xyXG4gICAgICAgIGlmICh0aGlzLnRlbXBlcmF0dXJlIDwgMCkge1xyXG4gICAgICAgICAgICB0aGlzLnRlbXBlcmF0dXJlID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVkdWNlRnVlbChhbW91bnQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucmVtYWluaW5nRnVlbCAtPSBhbW91bnQ7XHJcbiAgICAgICAgaWYgKHRoaXMucmVtYWluaW5nRnVlbCA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1haW5pbmdGdWVsID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW50ZWdyaXR5KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZWdyaXR5O1xyXG4gICAgfVxyXG5cclxuICAgIHN1c3RhaW5EYW1hZ2UoYW1vdW50OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmludGVncml0eSAtPSBhbW91bnQ7XHJcbiAgICAgICAgaWYgKHRoaXMuaW50ZWdyaXR5IDw9IDApIHtcclxuICAgICAgICAgICAgdGhpcy5pbnRlZ3JpdHkgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTsgLy8gd2UgYXJlIGRlYWRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVwYWlyKGFtb3VudDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pbnRlZ3JpdHkgPSBhbW91bnQ7XHJcbiAgICAgICAgaWYgKHRoaXMuaW50ZWdyaXR5ID4gQ29uc3RhbnRzLk1BWF9JTlRFR1JJVFkpIHtcclxuICAgICAgICAgICAgdGhpcy5pbnRlZ3JpdHkgPSBDb25zdGFudHMuTUFYX0lOVEVHUklUWTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcm90YXRlQXR0YWNobWVudHNDbG9ja3dpc2UoKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGxhc3Q6IFNoaXBBdHRhY2htZW50ID0gdGhpcy5hdHRhY2htZW50cy5wb3AoKTsgLy8gcmVtb3ZlIGxhc3QgZWxlbWVudFxyXG4gICAgICAgIHRoaXMuYXR0YWNobWVudHMudW5zaGlmdChsYXN0KTsgLy8gcHVzaCBsYXN0IGVsZW1lbnQgb250byBzdGFydCBvZiBhcnJheVxyXG4gICAgICAgIHRoaXMudXBkYXRlQXR0YWNobWVudFBvc2l0aW9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIHJvdGF0ZUF0dGFjaG1lbnRzQW50aUNsb2Nrd2lzZSgpOiB2b2lkIHtcclxuICAgICAgICBsZXQgZmlyc3Q6IFNoaXBBdHRhY2htZW50ID0gdGhpcy5hdHRhY2htZW50cy5zaGlmdCgpOyAvLyByZW1vdmUgZmlyc3QgZWxlbWVudFxyXG4gICAgICAgIHRoaXMuYXR0YWNobWVudHMucHVzaChmaXJzdCk7IC8vIHB1c2ggZmlyc3QgZWxlbWVudCBvbnRvIGVuZCBvZiBhcnJheVxyXG4gICAgICAgIHRoaXMudXBkYXRlQXR0YWNobWVudFBvc2l0aW9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlQXR0YWNobWVudFBvc2l0aW9ucygpOiB2b2lkIHtcclxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8dGhpcy5hdHRhY2htZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGkpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgQXR0YWNobWVudExvY2F0aW9uLmZyb250OlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0YWNobWVudHNbaV0uc2V0QXR0YWNobWVudExvY2F0aW9uKEF0dGFjaG1lbnRMb2NhdGlvbi5mcm9udCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEF0dGFjaG1lbnRMb2NhdGlvbi5mcm9udFJpZ2h0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0YWNobWVudHNbaV0uc2V0QXR0YWNobWVudExvY2F0aW9uKEF0dGFjaG1lbnRMb2NhdGlvbi5mcm9udFJpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgQXR0YWNobWVudExvY2F0aW9uLnJpZ2h0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0YWNobWVudHNbaV0uc2V0QXR0YWNobWVudExvY2F0aW9uKEF0dGFjaG1lbnRMb2NhdGlvbi5yaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEF0dGFjaG1lbnRMb2NhdGlvbi5iYWNrUmlnaHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50c1tpXS5zZXRBdHRhY2htZW50TG9jYXRpb24oQXR0YWNobWVudExvY2F0aW9uLmJhY2tSaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEF0dGFjaG1lbnRMb2NhdGlvbi5iYWNrTGVmdDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dGFjaG1lbnRzW2ldLnNldEF0dGFjaG1lbnRMb2NhdGlvbihBdHRhY2htZW50TG9jYXRpb24uYmFja0xlZnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBBdHRhY2htZW50TG9jYXRpb24ubGVmdDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dGFjaG1lbnRzW2ldLnNldEF0dGFjaG1lbnRMb2NhdGlvbihBdHRhY2htZW50TG9jYXRpb24ubGVmdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEF0dGFjaG1lbnRMb2NhdGlvbi5mcm9udExlZnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50c1tpXS5zZXRBdHRhY2htZW50TG9jYXRpb24oQXR0YWNobWVudExvY2F0aW9uLmZyb250TGVmdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiByZXBsYWNlcyB0aGUgYXR0YWNobWVudCBpbiB7QXR0YWNobWVudExvY2F0aW9uLmZyb250fVxyXG4gICAgICogd2l0aCB0aGUgcGFzc2VkIGluIHtTaGlwQXR0YWNobWVudH0uIGlmIG5vIGF0dGFjaG1lbnRcclxuICAgICAqIGluIHRoZSB7QXR0YWNobWVudExvY2F0aW9uLmZyb250fSBzbG90IHRoZW4gaXQgaXMgXHJcbiAgICAgKiBzaW1wbHkgYWRkZWQuXHJcbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudCB0aGUgYXR0YWNobWVudCB0byBiZSBhZGRlZFxyXG4gICAgICovXHJcbiAgICBhZGRBdHRhY2htZW50KGF0dGFjaG1lbnQ6IFNoaXBBdHRhY2htZW50KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVBdHRhY2htZW50KEF0dGFjaG1lbnRMb2NhdGlvbi5mcm9udCk7XHJcbiAgICAgICAgdGhpcy5hdHRhY2htZW50c1tBdHRhY2htZW50TG9jYXRpb24uZnJvbnRdID0gYXR0YWNobWVudDtcclxuICAgICAgICBhdHRhY2htZW50LmF0dGFjaCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVBdHRhY2htZW50KGxvY2F0aW9uOiBBdHRhY2htZW50TG9jYXRpb24pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmF0dGFjaG1lbnRzW2xvY2F0aW9uXS5kZXRhY2goKTtcclxuICAgICAgICB0aGlzLmF0dGFjaG1lbnRzW2xvY2F0aW9uXSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICAvLyBUT0RPOlxyXG4gICAgfVxyXG59IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX182X187IiwiaW1wb3J0IHsgdjQgfSBmcm9tIFwidXVpZFwiO1xyXG5cclxuZXhwb3J0IG1vZHVsZSBSTkcge1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGludChtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBndWlkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHY0KCk7XHJcbiAgICB9XHJcbn0iLCJ2YXIgdjEgPSByZXF1aXJlKCcuL3YxJyk7XG52YXIgdjQgPSByZXF1aXJlKCcuL3Y0Jyk7XG5cbnZhciB1dWlkID0gdjQ7XG51dWlkLnYxID0gdjE7XG51dWlkLnY0ID0gdjQ7XG5cbm1vZHVsZS5leHBvcnRzID0gdXVpZDtcbiIsInZhciBybmcgPSByZXF1aXJlKCcuL2xpYi9ybmcnKTtcbnZhciBieXRlc1RvVXVpZCA9IHJlcXVpcmUoJy4vbGliL2J5dGVzVG9VdWlkJyk7XG5cbi8vICoqYHYxKClgIC0gR2VuZXJhdGUgdGltZS1iYXNlZCBVVUlEKipcbi8vXG4vLyBJbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vTGlvc0svVVVJRC5qc1xuLy8gYW5kIGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS91dWlkLmh0bWxcblxudmFyIF9ub2RlSWQ7XG52YXIgX2Nsb2Nrc2VxO1xuXG4vLyBQcmV2aW91cyB1dWlkIGNyZWF0aW9uIHRpbWVcbnZhciBfbGFzdE1TZWNzID0gMDtcbnZhciBfbGFzdE5TZWNzID0gMDtcblxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCBmb3IgQVBJIGRldGFpbHNcbmZ1bmN0aW9uIHYxKG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gYnVmICYmIG9mZnNldCB8fCAwO1xuICB2YXIgYiA9IGJ1ZiB8fCBbXTtcblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIG5vZGUgPSBvcHRpb25zLm5vZGUgfHwgX25vZGVJZDtcbiAgdmFyIGNsb2Nrc2VxID0gb3B0aW9ucy5jbG9ja3NlcSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbG9ja3NlcSA6IF9jbG9ja3NlcTtcblxuICAvLyBub2RlIGFuZCBjbG9ja3NlcSBuZWVkIHRvIGJlIGluaXRpYWxpemVkIHRvIHJhbmRvbSB2YWx1ZXMgaWYgdGhleSdyZSBub3RcbiAgLy8gc3BlY2lmaWVkLiAgV2UgZG8gdGhpcyBsYXppbHkgdG8gbWluaW1pemUgaXNzdWVzIHJlbGF0ZWQgdG8gaW5zdWZmaWNpZW50XG4gIC8vIHN5c3RlbSBlbnRyb3B5LiAgU2VlICMxODlcbiAgaWYgKG5vZGUgPT0gbnVsbCB8fCBjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgdmFyIHNlZWRCeXRlcyA9IHJuZygpO1xuICAgIGlmIChub2RlID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjUsIGNyZWF0ZSBhbmQgNDgtYml0IG5vZGUgaWQsICg0NyByYW5kb20gYml0cyArIG11bHRpY2FzdCBiaXQgPSAxKVxuICAgICAgbm9kZSA9IF9ub2RlSWQgPSBbXG4gICAgICAgIHNlZWRCeXRlc1swXSB8IDB4MDEsXG4gICAgICAgIHNlZWRCeXRlc1sxXSwgc2VlZEJ5dGVzWzJdLCBzZWVkQnl0ZXNbM10sIHNlZWRCeXRlc1s0XSwgc2VlZEJ5dGVzWzVdXG4gICAgICBdO1xuICAgIH1cbiAgICBpZiAoY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuMi4yLCByYW5kb21pemUgKDE0IGJpdCkgY2xvY2tzZXFcbiAgICAgIGNsb2Nrc2VxID0gX2Nsb2Nrc2VxID0gKHNlZWRCeXRlc1s2XSA8PCA4IHwgc2VlZEJ5dGVzWzddKSAmIDB4M2ZmZjtcbiAgICB9XG4gIH1cblxuICAvLyBVVUlEIHRpbWVzdGFtcHMgYXJlIDEwMCBuYW5vLXNlY29uZCB1bml0cyBzaW5jZSB0aGUgR3JlZ29yaWFuIGVwb2NoLFxuICAvLyAoMTU4Mi0xMC0xNSAwMDowMCkuICBKU051bWJlcnMgYXJlbid0IHByZWNpc2UgZW5vdWdoIGZvciB0aGlzLCBzb1xuICAvLyB0aW1lIGlzIGhhbmRsZWQgaW50ZXJuYWxseSBhcyAnbXNlY3MnIChpbnRlZ2VyIG1pbGxpc2Vjb25kcykgYW5kICduc2VjcydcbiAgLy8gKDEwMC1uYW5vc2Vjb25kcyBvZmZzZXQgZnJvbSBtc2Vjcykgc2luY2UgdW5peCBlcG9jaCwgMTk3MC0wMS0wMSAwMDowMC5cbiAgdmFyIG1zZWNzID0gb3B0aW9ucy5tc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tc2VjcyA6IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gIC8vIFBlciA0LjIuMS4yLCB1c2UgY291bnQgb2YgdXVpZCdzIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGN1cnJlbnQgY2xvY2tcbiAgLy8gY3ljbGUgdG8gc2ltdWxhdGUgaGlnaGVyIHJlc29sdXRpb24gY2xvY2tcbiAgdmFyIG5zZWNzID0gb3B0aW9ucy5uc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5uc2VjcyA6IF9sYXN0TlNlY3MgKyAxO1xuXG4gIC8vIFRpbWUgc2luY2UgbGFzdCB1dWlkIGNyZWF0aW9uIChpbiBtc2VjcylcbiAgdmFyIGR0ID0gKG1zZWNzIC0gX2xhc3RNU2VjcykgKyAobnNlY3MgLSBfbGFzdE5TZWNzKS8xMDAwMDtcblxuICAvLyBQZXIgNC4yLjEuMiwgQnVtcCBjbG9ja3NlcSBvbiBjbG9jayByZWdyZXNzaW9uXG4gIGlmIChkdCA8IDAgJiYgb3B0aW9ucy5jbG9ja3NlcSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgY2xvY2tzZXEgPSBjbG9ja3NlcSArIDEgJiAweDNmZmY7XG4gIH1cblxuICAvLyBSZXNldCBuc2VjcyBpZiBjbG9jayByZWdyZXNzZXMgKG5ldyBjbG9ja3NlcSkgb3Igd2UndmUgbW92ZWQgb250byBhIG5ld1xuICAvLyB0aW1lIGludGVydmFsXG4gIGlmICgoZHQgPCAwIHx8IG1zZWNzID4gX2xhc3RNU2VjcykgJiYgb3B0aW9ucy5uc2VjcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbnNlY3MgPSAwO1xuICB9XG5cbiAgLy8gUGVyIDQuMi4xLjIgVGhyb3cgZXJyb3IgaWYgdG9vIG1hbnkgdXVpZHMgYXJlIHJlcXVlc3RlZFxuICBpZiAobnNlY3MgPj0gMTAwMDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3V1aWQudjEoKTogQ2FuXFwndCBjcmVhdGUgbW9yZSB0aGFuIDEwTSB1dWlkcy9zZWMnKTtcbiAgfVxuXG4gIF9sYXN0TVNlY3MgPSBtc2VjcztcbiAgX2xhc3ROU2VjcyA9IG5zZWNzO1xuICBfY2xvY2tzZXEgPSBjbG9ja3NlcTtcblxuICAvLyBQZXIgNC4xLjQgLSBDb252ZXJ0IGZyb20gdW5peCBlcG9jaCB0byBHcmVnb3JpYW4gZXBvY2hcbiAgbXNlY3MgKz0gMTIyMTkyOTI4MDAwMDA7XG5cbiAgLy8gYHRpbWVfbG93YFxuICB2YXIgdGwgPSAoKG1zZWNzICYgMHhmZmZmZmZmKSAqIDEwMDAwICsgbnNlY3MpICUgMHgxMDAwMDAwMDA7XG4gIGJbaSsrXSA9IHRsID4+PiAyNCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiAxNiAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdGwgJiAweGZmO1xuXG4gIC8vIGB0aW1lX21pZGBcbiAgdmFyIHRtaCA9IChtc2VjcyAvIDB4MTAwMDAwMDAwICogMTAwMDApICYgMHhmZmZmZmZmO1xuICBiW2krK10gPSB0bWggPj4+IDggJiAweGZmO1xuICBiW2krK10gPSB0bWggJiAweGZmO1xuXG4gIC8vIGB0aW1lX2hpZ2hfYW5kX3ZlcnNpb25gXG4gIGJbaSsrXSA9IHRtaCA+Pj4gMjQgJiAweGYgfCAweDEwOyAvLyBpbmNsdWRlIHZlcnNpb25cbiAgYltpKytdID0gdG1oID4+PiAxNiAmIDB4ZmY7XG5cbiAgLy8gYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgIChQZXIgNC4yLjIgLSBpbmNsdWRlIHZhcmlhbnQpXG4gIGJbaSsrXSA9IGNsb2Nrc2VxID4+PiA4IHwgMHg4MDtcblxuICAvLyBgY2xvY2tfc2VxX2xvd2BcbiAgYltpKytdID0gY2xvY2tzZXEgJiAweGZmO1xuXG4gIC8vIGBub2RlYFxuICBmb3IgKHZhciBuID0gMDsgbiA8IDY7ICsrbikge1xuICAgIGJbaSArIG5dID0gbm9kZVtuXTtcbiAgfVxuXG4gIHJldHVybiBidWYgPyBidWYgOiBieXRlc1RvVXVpZChiKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB2MTtcbiIsInZhciBybmcgPSByZXF1aXJlKCcuL2xpYi9ybmcnKTtcbnZhciBieXRlc1RvVXVpZCA9IHJlcXVpcmUoJy4vbGliL2J5dGVzVG9VdWlkJyk7XG5cbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gYnVmICYmIG9mZnNldCB8fCAwO1xuXG4gIGlmICh0eXBlb2Yob3B0aW9ucykgPT0gJ3N0cmluZycpIHtcbiAgICBidWYgPSBvcHRpb25zID09PSAnYmluYXJ5JyA/IG5ldyBBcnJheSgxNikgOiBudWxsO1xuICAgIG9wdGlvbnMgPSBudWxsO1xuICB9XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTtcblxuICAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG4gIHJuZHNbNl0gPSAocm5kc1s2XSAmIDB4MGYpIHwgMHg0MDtcbiAgcm5kc1s4XSA9IChybmRzWzhdICYgMHgzZikgfCAweDgwO1xuXG4gIC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuICBpZiAoYnVmKSB7XG4gICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IDE2OyArK2lpKSB7XG4gICAgICBidWZbaSArIGlpXSA9IHJuZHNbaWldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWYgfHwgYnl0ZXNUb1V1aWQocm5kcyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdjQ7XG4iLCJleHBvcnQgbW9kdWxlIENvbnN0YW50cyB7XHJcbiAgICBleHBvcnQgY29uc3QgTUFYX0lOVEVHUklUWTogbnVtYmVyID0gMTAwO1xyXG4gICAgZXhwb3J0IGNvbnN0IE1BWF9GVUVMOiBudW1iZXIgPSAxMDA7XHJcbiAgICBleHBvcnQgY29uc3QgTUFYX1NBRkVfVEVNUEVSQVRVUkU6IG51bWJlciA9IDEwMDtcclxuICAgIGV4cG9ydCBjb25zdCBNQVhfVEVNUEVSQVRVUkU6IG51bWJlciA9IDIwMDtcclxuICAgIGV4cG9ydCBjb25zdCBPVkVSSEVBVF9DSEVDS19JTlRFUlZBTDogbnVtYmVyID0gMTAwMDsgLy8gbWlsbGlzZWNvbmRzXHJcbiAgICBleHBvcnQgY29uc3QgQ09PTElOR19SQVRFOiBudW1iZXIgPSAwLjE7IC8vIGRlZ3JlZXMgcGVyIHNlY29uZFxyXG4gICAgZXhwb3J0IGNvbnN0IEZVRUxfUEVSX1RIUlVTVDogbnVtYmVyID0gMC4wMTsgLy8gdW5pdHNcclxuICAgIGV4cG9ydCBjb25zdCBIRUFUX1BFUl9USFJVU1Q6IG51bWJlciA9IDAuNSAvLyBkZWdyZWVzXHJcbiAgICBleHBvcnQgY29uc3QgVEhSVVNURVJfRk9SQ0U6IG51bWJlciA9IDE7XHJcbn0iLCJleHBvcnQgbW9kdWxlIEhlbHBlcnMge1xyXG4gICAgLyoqXHJcbiAgICAgKiBnZXQgdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiBhbiBlbnVtLlxyXG4gICAgICogPHA+XHJcbiAgICAgKiBleDogPGk+ZW51bSBGb28geyBiYXIgPSAwLCBiYXogPSAxLCBib3ogPSAyIH08L2k+PGJyIC8+XHJcbiAgICAgKiByZXR1cm5zOiA8Yj4zPC9iPlxyXG4gICAgICogPC9wPlxyXG4gICAgICogQHBhcmFtIGVudW1UeXBlIHRoZSB0eXBlIG5hbWUgb2YgYW4gZW51bVxyXG4gICAgICogQHJldHVybnMgdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgZW51bVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZW51bUxlbmd0aChlbnVtVHlwZTogYW55KTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgIGZvcihsZXQgaXRlbSBpbiBlbnVtVHlwZSkge1xyXG4gICAgICAgICAgICBpZihpc05hTihOdW1iZXIoaXRlbSkpKSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb3VudDtcclxuICAgIH1cclxufSIsImV4cG9ydCBlbnVtIEF0dGFjaG1lbnRMb2NhdGlvbiB7XHJcbiAgICBmcm9udCxcclxuICAgIGZyb250UmlnaHQsXHJcbiAgICByaWdodCxcclxuICAgIGJhY2tSaWdodCxcclxuICAgIC8vIE5PVEU6IHRoZXJlIGlzIG5vICdiYWNrJyBhdHRhY2htZW50IHBvaW50IGR1ZSB0byBsb2NhdGlvbiBvZiB0aHJ1c3RlclxyXG4gICAgYmFja0xlZnQsXHJcbiAgICBsZWZ0LFxyXG4gICAgZnJvbnRMZWZ0XHJcbn0iLCJpbXBvcnQgeyBIYXNMb2NhdGlvbiB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL2hhcy1sb2NhdGlvblwiO1xyXG5pbXBvcnQgeyBNb3VzZVdoZWVsU2Nyb2xsIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvbW91c2Utd2hlZWwtc2Nyb2xsXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTW91c2UgaW1wbGVtZW50cyBIYXNMb2NhdGlvbiB7XHJcbiAgICBwcml2YXRlIHNjZW5lOiBQaGFzZXIuU2NlbmU7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBQaGFzZXIuU2NlbmUpIHtcclxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5pbnB1dC5tb3VzZS5jYXB0dXJlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJldHVybnMgdGhlIHBvc2l0aW9uIG9mIHRoZSBtb3VzZSB3aXRoaW4gdGhlIGJvdW5kcyBvZiB0aGUgY3VycmVudFxyXG4gICAgICogc2NyZWVuLlxyXG4gICAgICogQHJldHVybnMgYSB7UGhhc2VyLk1hdGguVmVjdG9yMn0gY2xvbmUgb2YgdGhlIHBvc2l0aW9uXHJcbiAgICAgKi9cclxuICAgIGdldExvY2F0aW9uKCk6IFBoYXNlci5NYXRoLlZlY3RvcjIge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBtb3VzZSBsb2NhdGlvbjogJHtKU09OLnN0cmluZ2lmeSh0aGlzLmxvY2F0aW9uKX1gKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5zY2VuZS5pbnB1dC5hY3RpdmVQb2ludGVyLnBvc2l0aW9uLmNsb25lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBvZmZzZXRzIHRoZSBzY3JlZW4gcG9zaXRpb24gYmFzZWQgb24gY2FtZXJhIHBvc2l0aW9uXHJcbiAgICAgKi9cclxuICAgIGdldFJlYWxMb2NhdGlvbigpOiBQaGFzZXIuTWF0aC5WZWN0b3IyIHtcclxuICAgICAgICBsZXQgbG9jOiBQaGFzZXIuTWF0aC5WZWN0b3IyID0gdGhpcy5nZXRMb2NhdGlvbigpO1xyXG4gICAgICAgIGxldCB3b3JsZDogUGhhc2VyLk1hdGguVmVjdG9yMiA9IHRoaXMuc2NlbmUuY2FtZXJhcy5tYWluLmdldFdvcmxkUG9pbnQobG9jLngsIGxvYy55KTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgbW91c2UgUkVBTCBsb2NhdGlvbjogJHtKU09OLnN0cmluZ2lmeSh3b3JsZCl9YCk7XHJcbiAgICAgICAgcmV0dXJuIHdvcmxkO1xyXG4gICAgfVxyXG5cclxuICAgIG9uV2hlZWxVcDxUIGV4dGVuZHMgTW91c2VXaGVlbFNjcm9sbD4oZnVuYzogVCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2NlbmUuaW5wdXQub24oUGhhc2VyLklucHV0LkV2ZW50cy5QT0lOVEVSX1dIRUVMLCAocG9pbnRlciwgY3VycmVudGx5T3ZlciwgZHgsIGR5LCBkeiwgZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGR5ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZnVuYyhkeSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbldoZWVsRG93bjxUIGV4dGVuZHMgTW91c2VXaGVlbFNjcm9sbD4oZnVuYzogVCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2NlbmUuaW5wdXQub24oUGhhc2VyLklucHV0LkV2ZW50cy5QT0lOVEVSX1dIRUVMLCAocG9pbnRlciwgY3VycmVudGx5T3ZlciwgZHgsIGR5LCBkeiwgZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGR5IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgZnVuYygtZHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9